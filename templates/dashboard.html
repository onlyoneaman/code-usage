<!DOCTYPE html>
<html lang="en" data-theme="system">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Code Usage Dashboard</title>
<style>
:root,[data-theme=light]{--bg-page:#f8fafc;--bg-card:#fff;--bg-header:#fff;--border-main:#e2e8f0;--border-light:#f1f5f9;--text-primary:#0f172a;--text-secondary:#334155;--text-muted:#64748b;--text-faint:#94a3b8;--text-link-dot:#cbd5e1;--bg-tab-bar:#e2e8f0;--bg-tab-active:#f8fafc;--bg-code:#e2e8f0;--bg-tooltip:#1e293b;--text-tooltip:#f1f5f9;--bar-empty:#e2e8f0;--shadow-card:rgba(0, 0, 0, 0.04);--shadow-tooltip:rgba(0, 0, 0, 0.15);--bg-info-icon:#e2e8f0;--bg-toggle:#e2e8f0;--bg-toggle-active:#fff;--shadow-toggle:rgba(0, 0, 0, 0.08);--hover-row:#f8fafc;--section-heading:#1e293b;--proj-name:#1e293b;--mu-cost:#0f172a;--proj-cost:#0f172a;--donut-hole:#fff}[data-theme=dark]{--bg-page:#0f172a;--bg-card:#1e293b;--bg-header:#1e293b;--border-main:#334155;--border-light:#1e293b;--text-primary:#f1f5f9;--text-secondary:#cbd5e1;--text-muted:#94a3b8;--text-faint:#64748b;--text-link-dot:#475569;--bg-tab-bar:#334155;--bg-tab-active:#0f172a;--bg-code:#334155;--bg-tooltip:#f1f5f9;--text-tooltip:#0f172a;--bar-empty:#334155;--shadow-card:rgba(0, 0, 0, 0.2);--shadow-tooltip:rgba(0, 0, 0, 0.3);--bg-info-icon:#334155;--bg-toggle:#334155;--bg-toggle-active:#1e293b;--shadow-toggle:rgba(0, 0, 0, 0.2);--hover-row:#1e293b;--section-heading:#e2e8f0;--proj-name:#e2e8f0;--mu-cost:#f1f5f9;--proj-cost:#f1f5f9;--donut-hole:#1e293b}@media (prefers-color-scheme:dark){[data-theme=system]{--bg-page:#0f172a;--bg-card:#1e293b;--bg-header:#1e293b;--border-main:#334155;--border-light:#1e293b;--text-primary:#f1f5f9;--text-secondary:#cbd5e1;--text-muted:#94a3b8;--text-faint:#64748b;--text-link-dot:#475569;--bg-tab-bar:#334155;--bg-tab-active:#0f172a;--bg-code:#334155;--bg-tooltip:#f1f5f9;--text-tooltip:#0f172a;--bar-empty:#334155;--shadow-card:rgba(0, 0, 0, 0.2);--shadow-tooltip:rgba(0, 0, 0, 0.3);--bg-info-icon:#334155;--bg-toggle:#334155;--bg-toggle-active:#1e293b;--shadow-toggle:rgba(0, 0, 0, 0.2);--hover-row:#1e293b;--section-heading:#e2e8f0;--proj-name:#e2e8f0;--mu-cost:#f1f5f9;--proj-cost:#f1f5f9;--donut-hole:#1e293b}}*{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",system-ui,sans-serif;background:var(--bg-page);color:var(--text-secondary);line-height:1.6}.header{border-bottom:1px solid var(--border-main);background:var(--bg-header)}.header-inner{max-width:1100px;margin:0 auto;padding:24px 24px 0}.header-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.header h1{font-size:24px;font-weight:700;color:var(--text-primary)}.header .sub{font-size:13px;color:var(--text-muted);margin-top:4px}.header .gen-time{font-size:11px;color:var(--text-faint);text-align:right}.header-meta{text-align:right}.header-links{font-size:11px;margin-top:4px}.header-links a{color:var(--text-faint);text-decoration:none;font-weight:500}.header-links a:hover{color:var(--text-muted);text-decoration:underline}.header-links .link-dot{color:var(--text-link-dot);margin:0 4px}.container{max-width:1100px;margin:0 auto;padding:24px}.header-controls{display:flex;justify-content:space-between;align-items:flex-end;gap:12px}.tab-bar{display:flex;gap:4px;margin:0;background:var(--bg-tab-bar);border-radius:10px 10px 0 0;padding:4px 4px 0;width:fit-content}.tab-btn{padding:8px 20px 10px;border-radius:8px 8px 0 0;border:none;background:0 0;font-size:13px;font-weight:600;color:var(--text-muted);cursor:pointer;transition:.2s;display:inline-flex;align-items:center;gap:7px}.tab-icon{width:15px;height:15px;object-fit:contain;flex:0 0 auto}.tab-btn:hover{color:var(--text-secondary)}.tab-btn.active[data-tab=all]{background:var(--bg-tab-active);color:#3b82f6;box-shadow:none;border-bottom:2px solid #3b82f6}.tab-btn.active[data-tab=claude]{background:var(--bg-tab-active);color:#d37356;box-shadow:none;border-bottom:2px solid #d37356}.tab-btn.active[data-tab=codex]{background:var(--bg-tab-active);color:#7385fe;box-shadow:none;border-bottom:2px solid #7385fe}.tab-btn.active[data-tab=opencode]{background:var(--bg-tab-active);color:#10b981;box-shadow:none;border-bottom:2px solid #10b981}.tab-btn.active[data-tab=amp]{background:var(--bg-tab-active);color:#e8430b;box-shadow:none;border-bottom:2px solid #e8430b}.tab-btn.active[data-tab=pi]{background:var(--bg-tab-active);color:#6c5ce7;box-shadow:none;border-bottom:2px solid #6c5ce7}.range-control{display:flex;align-items:center;gap:8px;margin-bottom:6px}.range-label{font-size:12px;color:var(--text-muted);font-weight:600;white-space:nowrap}.range-select{border:1px solid var(--border-main);background:var(--bg-card);border-radius:8px;padding:6px 10px;font-size:12px;color:var(--text-primary);font-weight:600}.daily-view-toggle{display:inline-flex;gap:4px;background:var(--bg-toggle);border-radius:8px;padding:3px}.daily-view-btn{border:none;background:0 0;color:var(--text-muted);font-size:12px;font-weight:600;padding:5px 10px;border-radius:6px;cursor:pointer}.daily-view-btn.active{background:var(--bg-toggle-active);color:var(--text-primary);box-shadow:0 1px 2px var(--shadow-toggle)}.tab-panel{display:none}.tab-panel.active{display:block}.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:28px}.stat-card{background:var(--bg-card);border:1px solid var(--border-main);border-radius:12px;padding:20px;box-shadow:0 1px 3px var(--shadow-card)}.stat-label{font-size:11px;text-transform:uppercase;letter-spacing:.05em;color:var(--text-faint);margin-bottom:6px}.stat-value{font-size:28px;font-weight:700;color:var(--text-primary)}.stat-value.cost{color:var(--accent,#d37356)}.stat-sub{font-size:12px;color:var(--text-faint);margin-top:2px}.info-icon{display:inline-flex;align-items:center;justify-content:center;width:14px;height:14px;border-radius:50%;background:var(--bg-info-icon);color:var(--text-muted);font-size:9px;font-weight:700;font-style:italic;margin-left:5px;vertical-align:middle;cursor:help}.has-tooltip{cursor:help}.stat-tooltip{display:none;position:absolute;bottom:calc(100% + 8px);left:50%;transform:translateX(-50%);background:var(--bg-tooltip);color:var(--text-tooltip);padding:10px 14px;border-radius:8px;font-size:12px;white-space:pre-line;line-height:1.6;z-index:9999;pointer-events:none;box-shadow:0 4px 12px var(--shadow-tooltip);min-width:150px}.has-tooltip:hover .stat-tooltip{display:block}.section{margin-bottom:28px}.section h2{font-size:16px;font-weight:600;color:var(--section-heading);margin-bottom:14px;padding-bottom:8px;border-bottom:1px solid var(--border-main)}.section-header{display:flex;align-items:baseline;justify-content:space-between}.section-header h2{margin-bottom:0;border-bottom:none;padding-bottom:0}.section-header+*{padding-top:8px;border-top:1px solid var(--border-main)}table{width:100%;border-collapse:collapse;font-size:13px}th{text-align:left;padding:10px 14px;color:var(--text-faint);font-weight:600;font-size:11px;text-transform:uppercase;letter-spacing:.05em;border-bottom:2px solid var(--border-main)}th.r{text-align:right}td{padding:10px 14px;border-bottom:1px solid var(--border-light);color:var(--text-secondary)}tr:hover td{background:var(--hover-row)}td.num{text-align:right;font-variant-numeric:tabular-nums}td.cost-cell{font-weight:600;text-align:right;font-variant-numeric:tabular-nums}.model-tag{display:inline-block;padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600}.model-opus{background:#f9e8e3;color:#a8533a}.model-sonnet{background:#fdf1ec;color:#c47a5f}.model-haiku{background:#d1fae5;color:#047857}.model-codex{background:#e3e8fe;color:#4a5fc7}.model-opencode{background:#d1fae5;color:#047857}.model-amp{background:#fce8e3;color:#c03608}.model-pi{background:#ede8fd;color:#5040b2}.proj-wrap{background:var(--bg-card);border:1px solid var(--border-main);border-radius:12px;padding:24px;box-shadow:0 1px 3px var(--shadow-card);display:flex;align-items:center;gap:32px}.proj-donut{width:160px;height:160px;border-radius:50%;position:relative;flex-shrink:0}.proj-donut-hole{position:absolute;top:50%;left:50%;width:90px;height:90px;background:var(--donut-hole);border-radius:50%;transform:translate(-50%,-50%)}.proj-legend{flex:1;min-width:0}.proj-legend-row,.proj-more-row{display:flex;align-items:center;gap:10px;padding:6px 0}.proj-swatch{width:10px;height:10px;border-radius:3px;flex-shrink:0}.proj-legend-name{font-size:13px;font-weight:600;color:var(--proj-name);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.proj-legend-meta{display:flex;gap:10px;align-items:baseline;white-space:nowrap}.proj-cost{font-size:13px;font-weight:700;color:var(--proj-cost);font-variant-numeric:tabular-nums}.proj-sessions{font-size:12px;color:var(--text-faint)}.proj-toggle{background:0 0;border:none;color:var(--text-muted);font-size:12px;font-weight:600;cursor:pointer;padding:8px 0 0}.proj-toggle:hover{color:var(--text-secondary)}.proj-more-list{border-top:1px solid var(--border-light);margin-top:4px;padding-top:4px}@media (max-width:768px){.proj-wrap{flex-direction:column;align-items:stretch}.proj-donut{margin:0 auto}}.chart-container{background:var(--bg-card);border:1px solid var(--border-main);border-radius:12px;padding:40px 20px 20px;box-shadow:0 1px 3px var(--shadow-card);overflow:visible}.bar-chart{display:flex;align-items:flex-end;gap:3px;height:160px;position:relative}.bar-group{display:flex;flex-direction:column;align-items:center;flex:1;min-width:18px}.bar{width:100%;min-width:12px;max-width:28px;border-radius:3px 3px 0 0;transition:background .2s;cursor:pointer;position:relative}.bar:hover{filter:brightness(.9)}.bar-label{font-size:9px;color:var(--text-faint);margin-top:6px;writing-mode:vertical-lr;text-orientation:mixed;transform:rotate(180deg);max-height:50px;overflow:hidden}.heatmap-wrap{display:flex;gap:4px;width:100%}.heatmap-days{flex-shrink:0;width:26px;display:flex;flex-direction:column;gap:2px}.heatmap-day-label{flex:1;font-size:10px;color:var(--text-faint);text-align:right;padding-right:4px;display:flex;align-items:center;justify-content:flex-end}.heatmap-grid{display:grid;grid-template-rows:repeat(7,1fr);grid-auto-flow:column;gap:2px;flex:1}.heatmap-cell{aspect-ratio:1;border-radius:2px;background:var(--heatmap-empty,var(--border-main));cursor:pointer;transition:filter .15s}.heatmap-cell:hover{filter:brightness(.85)}.heatmap-months{display:flex;margin-bottom:4px}.heatmap-month-label{font-size:10px;color:var(--text-faint);text-align:left;overflow:hidden}.heatmap-legend{display:flex;align-items:center;gap:4px;font-size:10px;color:var(--text-faint)}.heatmap-legend-cell{width:12px;height:12px;border-radius:2px}.tooltip{display:none;position:absolute;bottom:calc(100% + 8px);left:50%;transform:translateX(-50%);background:var(--bg-tooltip);color:var(--text-tooltip);padding:8px 12px;border-radius:6px;font-size:11px;white-space:pre-line;min-width:170px;max-width:280px;line-height:1.35;text-align:left;z-index:9999;pointer-events:none;box-shadow:0 4px 12px var(--shadow-tooltip)}.chart-legend{display:flex;gap:14px;margin-bottom:8px;justify-content:flex-end;font-size:11px;color:var(--text-muted)}.chart-legend .swatch{display:inline-block;width:10px;height:10px;border-radius:2px;margin-right:4px;vertical-align:middle}.bar:hover .tooltip{display:block}.weekly-chart{display:flex;align-items:flex-end;gap:12px;height:160px;justify-content:center;position:relative}.weekly-chart .bar-group{display:flex;flex-direction:column;align-items:center;flex:1;max-width:120px}.weekly-chart .bar{width:100%;max-width:120px;min-width:40px;border-radius:6px 6px 0 0;transition:background .2s;cursor:pointer;position:relative}.weekly-chart .bar-label{font-size:11px;color:var(--text-muted);margin-top:8px;writing-mode:horizontal-tb;transform:none;text-align:center;max-height:none;font-weight:500}.weekly-chart .bar-cost{font-size:11px;font-weight:600;margin-bottom:4px}.pricing-note{font-size:12px;color:var(--text-faint);margin-top:16px;padding:12px;background:var(--bg-card);border-radius:8px;border:1px solid var(--border-main)}.model-usage-list{background:var(--bg-card);border:1px solid var(--border-main);border-radius:12px;overflow:hidden;box-shadow:0 1px 3px var(--shadow-card)}.mu-row{display:flex;align-items:center;padding:12px 16px;border-bottom:1px solid var(--border-light)}.mu-row:last-child{border-bottom:none}.mu-left{display:flex;align-items:center;gap:8px;min-width:240px}.mu-right{display:flex;align-items:center;gap:12px;flex:1}.mu-bar{height:8px;border-radius:4px;min-width:2px}.mu-cost{font-size:14px;font-weight:700;color:var(--mu-cost);font-variant-numeric:tabular-nums;white-space:nowrap}.no-data{text-align:center;padding:80px 24px;color:var(--text-faint)}.no-data h3{font-size:18px;color:var(--text-muted);margin-bottom:8px}.no-data a{color:var(--accent,#d37356)}.footer{text-align:center;margin-top:24px;padding:20px 0 8px;font-size:13px;color:var(--text-faint)}.footer code{background:var(--bg-code);padding:2px 6px;border-radius:4px;font-size:12px;color:var(--text-muted)}.footer a{color:var(--text-secondary);text-decoration:none;font-weight:600}.footer a:hover{text-decoration:underline}.footer p{margin:4px 0}.freshness-banner{background:var(--bg-card);border:1px solid var(--border-main);border-radius:8px;padding:12px 16px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;font-size:13px;box-shadow:0 1px 3px var(--shadow-card)}.freshness-banner .date-info{color:var(--text-muted)}.freshness-banner .date-val{color:var(--text-primary);font-weight:600}.more-stats-toggle{border:1px solid var(--border-main);background:var(--bg-card);color:var(--text-muted);font-size:11px;font-weight:600;padding:3px 10px;border-radius:6px;cursor:pointer;margin-left:6px}.more-stats-toggle:hover{background:var(--hover-row);color:var(--text-secondary)}.sub-badge{display:inline-block;padding:2px 8px;border-radius:4px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin-left:6px;vertical-align:middle}.sub-badge.claude{background:#f9e8e3;color:#a8533a}.sub-badge.codex{background:#e3e8fe;color:#4a5fc7}.sub-badge.opencode{background:#d1fae5;color:#047857}.sub-badge.amp{background:#fce8e3;color:#c03608}.sub-badge.pi{background:#ede8fd;color:#5040b2}.theme-toggle{display:inline-flex;gap:2px;background:var(--bg-tab-bar);border-radius:6px;padding:2px}.theme-btn{border:none;background:0 0;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:14px;color:var(--text-muted);line-height:1}.theme-btn.active{background:var(--bg-card);color:var(--text-primary);box-shadow:0 1px 2px var(--shadow-card)}.empty-state{text-align:center;padding:60px 24px}.empty-state h2{font-size:22px;color:var(--text-primary);margin-bottom:8px}.empty-state p{color:var(--text-muted);margin-bottom:20px}.empty-state .provider-list{list-style:none;text-align:left;max-width:400px;margin:0 auto 20px}.empty-state .provider-list li{padding:8px 0;border-bottom:1px solid var(--border-light)}.empty-state .provider-list li a{color:var(--text-primary);font-weight:600;text-decoration:none}.empty-state .provider-list li a:hover{text-decoration:underline}.empty-state .provider-list li span{color:var(--text-faint);font-size:12px;margin-left:8px}.empty-state code{background:var(--bg-code);padding:2px 6px;border-radius:4px;font-size:13px;color:var(--text-muted)}@media (max-width:768px){.header-inner{padding:16px 16px 0}.header-controls{flex-direction:column;align-items:stretch}.tab-bar{width:100%;justify-content:space-between}.tab-btn{flex:1;text-align:center;padding:8px 8px 10px;justify-content:center}.range-control{justify-content:flex-start;margin-bottom:10px}.stats-grid{grid-template-columns:repeat(2,1fr)}.container{padding:16px}}
</style>
</head>
<body>
<div class="header">
  <div class="header-inner">
    <div class="header-top">
      <div>
        <h1>Code Usage Dashboard</h1>
        <div class="sub">See how much your AI coding actually costs.</div>
      </div>
      <div class="header-meta">
        <div style="display:flex;align-items:center;justify-content:flex-end;gap:10px;">
          <div class="gen-time" id="gen-time"></div>
          <div class="theme-toggle" id="theme-toggle">
            <button type="button" class="theme-btn active" data-theme="system" title="System">&#9788;</button>
            <button type="button" class="theme-btn" data-theme="light" title="Light">&#9728;</button>
            <button type="button" class="theme-btn" data-theme="dark" title="Dark">&#9790;</button>
          </div>
        </div>
        <div class="header-links">
          <a href="https://www.npmjs.com/package/code-usage" target="_blank" rel="noopener">code-usage</a>
          <span class="link-dot">&middot;</span>
          <a href="https://github.com/onlyoneaman/code-usage" target="_blank" rel="noopener">&#9733; Star on GitHub</a>
          <span class="link-dot">&middot;</span>
          <a href="https://livebench.ai/#/" target="_blank" rel="noopener">LiveBench</a>
        </div>
      </div>
    </div>
    <div class="header-controls">
      <div class="tab-bar" id="tab-bar"></div>
      <div class="range-control">
        <label class="range-label" for="range-select">Range</label>
        <select class="range-select" id="range-select"></select>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div id="panel-all" class="tab-panel"></div>
  <div id="panel-claude" class="tab-panel"></div>
  <div id="panel-codex" class="tab-panel"></div>
  <div id="panel-opencode" class="tab-panel"></div>
  <div id="panel-amp" class="tab-panel"></div>
  <div id="panel-pi" class="tab-panel"></div>
  <div class="footer">
    <p>Run <code>code-usage</code> to generate a fresh report.</p>
    <p id="footer-meta"></p>
  </div>
</div>
<script>
// DATA_PLACEHOLDER
function fmt(e){return e>=1e9?`${(e/1e9).toFixed(1)}B`:e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:String(e)}function fmtUSD(e){return`$${e.toFixed(2)}`}function pad2(e){return e<10?`0${e}`:String(e)}function localDateStr(e){return`${e.getFullYear()}-${pad2(e.getMonth()+1)}-${pad2(e.getDate())}`}function fullDateStr(e){var a=String(e||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);return a?`${a[2]}-${a[3]}-${a[1]}`:String(e||"")}function fullDateFromIso(e){if(!e)return"-";var a=new Date(e);return Number.isNaN(a.getTime())?String(e):`${pad2(a.getMonth()+1)}-${pad2(a.getDate())}-${a.getFullYear()}`}function modelUsageKey(e){return String(e||"").replace(/-\d{8}$/,"")}function toFileUrl(e){var a=String(e||"").replace(/\\/g,"/");return a?0===a.indexOf("file://")||0===a.indexOf("http://")||0===a.indexOf("https://")?a:"/"===a.charAt(0)?`file://${a}`:`file:///${a}`:""}var PROVIDERS=[{key:"claude",color:"#D37356",label:"Claude"},{key:"codex",color:"#7385FE",label:"Codex"},{key:"opencode",color:"#10b981",label:"OpenCode"},{key:"amp",color:"#E8430B",label:"Amp"},{key:"pi",color:"#6C5CE7",label:"Pi-Agent"}],PROVIDER_MAP={};function providerFromModel(e){var a=String(e||"").toLowerCase();return a.startsWith("gpt-")?"codex":-1!==a.indexOf("[pi]")||-1!==a.indexOf("pi-agent")?"pi":-1!==a.indexOf("amp")?"amp":a.startsWith("claude-")||-1!==a.indexOf("opus")||-1!==a.indexOf("sonnet")||-1!==a.indexOf("haiku")?"claude":"opencode"}function colorForModel(e){var a=String(e||"").toLowerCase();if(-1!==a.indexOf("haiku"))return"#047857";if(-1!==a.indexOf("sonnet"))return"#c47a5f";var t=providerFromModel(e);return PROVIDER_MAP[t]?PROVIDER_MAP[t].color:"#10b981"}function rowAgentCosts(e){var a={};PROVIDERS.forEach(e=>{a[e.key]=0});var t=e?.modelCosts?e.modelCosts:null;if(t)for(var s in t){var l=providerFromModel(s);a[l]=(a[l]||0)+(t[s]||0)}return PROVIDERS.map(e=>({key:e.key,label:e.label,color:e.color,cost:a[e.key]||0})).filter(e=>e.cost>0)}PROVIDERS.forEach(e=>{PROVIDER_MAP[e.key]=e});var MONTHS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function el(e,a,t){var s=document.createElement(e);if(a)for(var l in a)"class"===l?s.className=a[l]:"style"===l?s.style.cssText=a[l]:s.setAttribute(l,a[l]);return t&&("string"==typeof t?s.textContent=t:Array.isArray(t)?t.forEach(e=>{e&&s.appendChild(e)}):s.appendChild(t)),s}function createStatCard(e,a,t,s){var l=el("div",{class:"stat-card"});return l.appendChild(el("div",{class:"stat-label"},e)),l.appendChild(el("div",{class:"stat-value"+(t?` ${t}`:"")},a)),s&&l.appendChild(el("div",{class:"stat-sub"},s)),l}function renderFooter(){var e=document.getElementById("footer-meta");if(e){var a="undefined"!=typeof DATA&&DATA&&DATA.appMeta?DATA.appMeta:{},t=a.authorName||"Aman",s=a.authorUrl||"https://x.com/onlyoneaman",l=a.repoUrl||"https://github.com/onlyoneaman/code-usage",o=(a.packageUrl,a.name,a.version||"");e.textContent="",e.appendChild(document.createTextNode("Made with ❤️ by ")),e.appendChild(el("a",{href:s,target:"_blank",rel:"noopener noreferrer"},t)),o&&e.appendChild(document.createTextNode(` · v${o}`)),e.appendChild(document.createTextNode(" · ")),e.appendChild(el("a",{href:l,target:"_blank",rel:"noopener noreferrer"},"GitHub")),"undefined"!=typeof DATA&&DATA&&DATA.metadata&&DATA.metadata.jsonPath&&(e.appendChild(document.createTextNode(" · ")),e.appendChild(el("a",{href:toFileUrl(DATA.metadata.jsonPath),target:"_blank",rel:"noopener noreferrer"},"View raw data (JSON)")));var n=el("p",{style:"margin-top:6px;"});n.appendChild(document.createTextNode("If you liked it, ")),n.appendChild(el("a",{href:l,target:"_blank",rel:"noopener noreferrer"},"star on GitHub")),n.appendChild(document.createTextNode(" · Feedback/bugs? ")),n.appendChild(el("a",{href:s,target:"_blank",rel:"noopener noreferrer"},`Contact ${t}`)),e.parentNode.appendChild(n)}}var MODEL_ORDER=["opus-4-6","opus-4-5","opus-4-1","opus-4","sonnet-4-5","sonnet-4","sonnet-3-7","haiku-4-5","haiku-3-5","gpt-5.3","gpt-5.2","gpt-5.1","gpt-5-codex"];function modelSortKey(e){for(var a=0;a<MODEL_ORDER.length;a++)if(e.includes(MODEL_ORDER[a]))return a;return 99}function createModelTag(e){if(e.startsWith("gpt-"))return el("span",{class:"model-tag model-codex"},e);if(e.startsWith("claude-")||-1!==e.indexOf("opus")||-1!==e.indexOf("sonnet")||-1!==e.indexOf("haiku")){var a=e.replace("claude-","").replace(/-\d{8}$/,""),t=a.split("-");a=`${t[0].charAt(0).toUpperCase()+t[0].slice(1)} ${t.slice(1).join(".")}`;var s="model-tag model-sonnet";return e.includes("opus")?s="model-tag model-opus":e.includes("haiku")&&(s="model-tag model-haiku"),el("span",{class:s},a)}var l=e.toLowerCase();return-1!==l.indexOf("[pi]")||-1!==l.indexOf("pi-agent")?el("span",{class:"model-tag model-pi"},e):-1!==l.indexOf("amp")?el("span",{class:"model-tag model-amp"},e):el("span",{class:"model-tag model-opencode"},e)}function getWeekStart(e){var a=new Date(`${e}T12:00:00`),t=a.getDay(),s=0===t?6:t-1;return a.setDate(a.getDate()-s),localDateStr(a)}function weekLabel(e){var a=new Date(`${e}T12:00:00`),t=new Date(a);return t.setDate(t.getDate()+6),a.getMonth()===t.getMonth()?`${MONTHS[a.getMonth()]} ${a.getDate()}-${t.getDate()}`:`${MONTHS[a.getMonth()]} ${a.getDate()} - ${MONTHS[t.getMonth()]} ${t.getDate()}`}function sumBy(e,a){return e.reduce((e,t)=>e+(t[a]||0),0)}function buildOpts(e){var a=e.summary,t=e.accent,s=e.daily.length,l=s>0?a.totalCost/s:0,o=a.totalSessions>0?a.totalCost/a.totalSessions:0,n=a.firstDate?new Date(a.firstDate):new Date,r=localDateStr(new Date),d={};e.daily.forEach(e=>{d[e.date]=e});for(var i=[],c=new Date(n);localDateStr(c)<=r;){var p=localDateStr(c);i.push(d[p]||{date:p,cost:0,sessions:0,messages:0,models:[]}),c.setDate(c.getDate()+1)}var h=1;i.forEach(e=>{e.messages>h&&(h=e.messages)});var u={};e.daily.forEach(e=>{var a=getWeekStart(e.date);u[a]||(u[a]={cost:0,sessions:0}),u[a].cost+=e.cost,u[a].sessions+=e.sessions});var v=Object.keys(u).sort(),m=e.daily.slice().reverse(),g=[];e.extra&&((e.extra.linesAdded||e.extra.linesRemoved)&&g.push(createStatCard("Lines",`+${fmt(e.extra.linesAdded||0)} / -${fmt(e.extra.linesRemoved||0)}`)),e.extra.filesModified&&g.push(createStatCard("Files Modified",fmt(e.extra.filesModified))));var f=[];if(e.badge){var C=el("span",{class:`sub-badge ${e.provider||"claude"}`});C.textContent=e.badge,f.push(el("span",{class:"date-info"},[C]))}var y=e.models.map(a=>({id:a.id,cost:a.cost,provider:e.provider})),D=y.slice().sort((e,a)=>a.cost-e.cost),k=(e.projects||[]).map(a=>({name:a.name,path:a.path,sessions:a.sessions,messages:a.messages,cost:a.cost,daily:a.daily,provider:e.provider}));return{accent:t,provider:e.provider,displayCost:a.totalCost,daysActive:s,totalSessions:a.totalSessions,costPerDay:l,costPerSession:o,streak:a.streak,userMessages:a.totalMessages,outputTokens:a.totalOutputTokens,totalTokens:a.totalTokens||0,tokenBreakdown:a.tokenBreakdown||null,firstDate:a.firstDate,allDays:i,maxMsg:h,rawModels:y,modelUsage:D,showProviderBadge:!1,weeklySorted:v,weeklyMap:u,dailyRows:m,extraCards:g,badgeEls:f,pricingNote:e.pricingNote,projects:k}}function mergeOpts(e){var a=e.filter(e=>!!e);if(0===a.length)return null;if(1===a.length)return adjustAccent(a[0]);var t=0,s=0,l=0,o=0,n=0,r={input:0,output:0,cacheRead:0,cacheWrite:0,cached:0,reasoning:0};a.forEach(e=>{t+=e.displayCost,s+=e.totalSessions,l+=e.userMessages,o+=e.outputTokens,n+=e.totalTokens||0;var a=e.tokenBreakdown||{};r.input+=a.input||0,r.output+=a.output||0,r.cacheRead+=a.cacheRead||0,r.cacheWrite+=a.cacheWrite||0,r.cached+=a.cached||0,r.reasoning+=a.reasoning||0});var d=[];a.forEach(e=>{var a={};(e.allDays||[]).forEach(e=>{a[e.date]=e}),d.push(a)});var i={};a.forEach(e=>{(e.allDays||[]).forEach(e=>{if(!i[e.date]){var a={date:e.date,cost:0,sessions:0,messages:0};PROVIDERS.forEach(e=>{a[e.key+"Cost"]=0,a[e.key+"Sess"]=0,a[e.key+"Msg"]=0}),i[e.date]=a}i[e.date].cost+=e.cost,i[e.date].sessions+=e.sessions,i[e.date].messages+=e.messages})}),a.forEach(e=>{var a=e.provider||"opencode",t={};for(var s in(e.allDays||[]).forEach(e=>{t[e.date]=e}),i){var l=t[s];l&&(i[s][`${a}Cost`]+=l.cost||0,i[s][`${a}Sess`]+=l.sessions||0,i[s][`${a}Msg`]+=l.messages||0)}});var c=Object.keys(i).sort(),p=c.length?`${c[0]}T00:00:00.000Z`:null,h=new Date,u=localDateStr(h),v=[];if(c.length)for(var m=new Date(`${c[0]}T12:00:00`);localDateStr(m)<=u;){var g=localDateStr(m);if(i[g])v.push(i[g]);else{var f={date:g,cost:0,sessions:0,messages:0};PROVIDERS.forEach(e=>{f[e.key+"Cost"]=0,f[e.key+"Sess"]=0,f[e.key+"Msg"]=0}),v.push(f)}m.setDate(m.getDate()+1)}var C=1;v.forEach(e=>{e.messages>C&&(C=e.messages)});var y=v.filter(e=>e.sessions>0).length,D={};v.forEach(e=>{e.sessions>0&&(D[e.date]=!0)});for(var k=0,b=new Date(h);D[localDateStr(b)];)k++,b.setDate(b.getDate()-1);var S={};a.forEach(e=>{var a=e.provider||"opencode";for(var t in e.weeklyMap||{})S[t]||(S[t]={cost:0,sessions:0},PROVIDERS.forEach(e=>{S[t][e.key+"Cost"]=0})),S[t].cost+=e.weeklyMap[t].cost||0,S[t].sessions+=e.weeklyMap[t].sessions||0,S[t][`${a}Cost`]+=e.weeklyMap[t].cost||0});var E=Object.keys(S).sort(),$={};a.forEach(e=>{(e.dailyRows||[]).forEach(e=>{if($[e.date]||($[e.date]={date:e.date,cost:0,sessions:0,messages:0,models:[],modelCosts:{}}),$[e.date].cost+=e.cost,$[e.date].sessions+=e.sessions,$[e.date].messages+=e.messages,e.modelCosts)for(var a in e.modelCosts)$[e.date].modelCosts[a]=($[e.date].modelCosts[a]||0)+(e.modelCosts[a]||0);e.models&&e.models.forEach(a=>{-1===$[e.date].models.indexOf(a)&&$[e.date].models.push(a)})})});var x=Object.keys($).sort().reverse().map(e=>{var a=$[e];return a.modelCosts&&(a.models=Object.keys(a.modelCosts).sort((e,t)=>{var s=a.modelCosts[e]||0,l=a.modelCosts[t]||0;return s!==l?l-s:e.localeCompare(t)})),a}),O=[];a.forEach(e=>{var a=e.provider||"opencode",t=PROVIDER_MAP[a],s=t?t.label:a;O.push(function(e,a,t){var s=el("span",{class:"date-info"}),l=el("span",{class:`sub-badge ${t}`});return l.textContent=`${e} ${a}`,s.appendChild(l),s}(s,e.totalSessions,a))});var R=[];a.forEach(e=>{R=R.concat(e.rawModels||[])}),R.sort((e,a)=>a.cost-e.cost);var w={};a.forEach(e=>{var a=e.provider||"opencode";(e.projects||[]).forEach(e=>{w[e.name]||(w[e.name]={name:e.name,path:e.path,sessions:0,messages:0,cost:0,daily:{}},PROVIDERS.forEach(a=>{w[e.name][a.key+"Cost"]=0})),w[e.name].sessions+=e.sessions,w[e.name].messages+=e.messages,w[e.name].cost+=e.cost,w[e.name][`${a}Cost`]+=e.cost||0,(e.daily||[]).forEach(t=>{w[e.name].daily[t.date]||(w[e.name].daily[t.date]={sessions:0,messages:0,cost:0},PROVIDERS.forEach(a=>{w[e.name].daily[t.date][a.key+"Cost"]=0})),w[e.name].daily[t.date].sessions+=t.sessions,w[e.name].daily[t.date].messages+=t.messages,w[e.name].daily[t.date].cost+=t.cost,w[e.name].daily[t.date][`${a}Cost`]+=t.cost||0})})});var M=Object.keys(w).map(e=>{var a=w[e];return a.daily=Object.keys(a.daily).sort().map(e=>{var t=a.daily[e],s={date:e,sessions:t.sessions,messages:t.messages,cost:t.cost};return PROVIDERS.forEach(e=>{s[e.key+"Cost"]=t[e.key+"Cost"]||0}),s}),a}).sort((e,a)=>a.cost-e.cost),A=[];return a.forEach(e=>{var a=e.provider||"opencode";A.push(a)}),{accent:"#3b82f6",displayCost:t,daysActive:y,totalSessions:s,costPerDay:y>0?t/y:0,costPerSession:s>0?t/s:0,streak:k,userMessages:l,outputTokens:o,totalTokens:n,tokenBreakdown:r,firstDate:p,allDays:v,maxMsg:C,stacked:!0,activeProviders:A,modelUsage:R,showProviderBadge:!0,weeklySorted:E,weeklyMap:S,dailyRows:x,extraCards:[],badgeEls:O,pricingNote:"Combined view across all agents. Models are sorted by estimated cost usage.",projects:M}}function adjustAccent(e){var a=Object.assign({},e);return a.accent="#3b82f6",a}var RANGE_OPTIONS=[{id:"this_week",label:"This Week"},{id:"this_month",label:"This Month"},{id:"this_year",label:"This Year"},{id:"last_30_days",label:"Last 30 Days"},{id:"last_90_days",label:"Last 90 Days"},{id:"all_time",label:"All Time"}];function rangeStart(e){var a=new Date,t=new Date(a.getFullYear(),a.getMonth(),a.getDate());if("this_week"===e){var s=t.getDay(),l=0===s?6:s-1;return t.setDate(t.getDate()-l),localDateStr(t)}return"this_month"===e?(t.setDate(1),localDateStr(t)):"this_year"===e?(t.setMonth(0,1),localDateStr(t)):"last_30_days"===e?(t.setDate(t.getDate()-29),localDateStr(t)):"last_90_days"===e?(t.setDate(t.getDate()-89),localDateStr(t)):null}function computeStreak(e){var a={};e.forEach(e=>{e.sessions>0&&(a[e.date]=!0)});for(var t=0,s=new Date;a[localDateStr(s)];)t++,s.setDate(s.getDate()-1);return t}function applyRange(e,a){if(!e)return e;if("all_time"===a){var t=Object.assign({},e);return t.rangeId=a,t.projects=e.projects||[],t}var s=rangeStart(a),l=(e.allDays||[]).filter(e=>e.date>=s),o=(e.dailyRows||[]).filter(e=>e.date>=s),n=sumBy(l,"cost"),r=sumBy(l,"sessions"),d=Math.max(0,e.userMessages||0),i=sumBy(e.allDays||[],"messages"),c=sumBy(l,"messages"),p=d,h=1;d>0&&i>0&&(h=c/i,p=Math.round(d*h));for(var u=l.filter(e=>e.sessions>0).length,v=null,m=0;m<l.length;m++)if(l[m].sessions>0){v=`${l[m].date}T00:00:00.000Z`;break}var g=1;l.forEach(e=>{e.messages>g&&(g=e.messages)});var f={};l.forEach(e=>{var a=getWeekStart(e.date);f[a]||(f[a]={cost:0,sessions:0},PROVIDERS.forEach(e=>{f[a][e.key+"Cost"]=0})),f[a].cost+=e.cost||0,f[a].sessions+=e.sessions||0,PROVIDERS.forEach(t=>{f[a][t.key+"Cost"]+=e[t.key+"Cost"]||0})});var C=Object.keys(f).sort(),y=e.modelUsage?.length?e.modelUsage:e.rawModels||[],D=(e.displayCost||0)>0?n/e.displayCost:0,k=y.map(e=>({id:e.id,cost:(e.cost||0)*D,provider:e.provider})).filter(e=>e.cost>0).sort((e,a)=>a.cost-e.cost),b=Math.round((e.outputTokens||0)*h),S=Math.round((e.totalTokens||0)*h),E=null;if(e.tokenBreakdown){var $=e.tokenBreakdown;for(var x in E={},$)$[x]&&(E[x]=Math.round($[x]*h))}var O=Object.assign({},e,{rangeId:a,allDays:l,maxMsg:g,dailyRows:o,weeklyMap:f,weeklySorted:C,displayCost:n,totalSessions:r,userMessages:p,outputTokens:b,totalTokens:S,tokenBreakdown:E,daysActive:u,firstDate:v,costPerDay:u>0?n/u:0,costPerSession:r>0?n/r:0,streak:computeStreak(l),modelUsage:k});if(O.stacked){var R=[];PROVIDERS.forEach(e=>{var a,t,s,o,n,r=sumBy(l,e.key+"Sess");r>0&&R.push((a=e.label,t=r,s=e.key,o=el("span",{class:"date-info"}),(n=el("span",{class:`sub-badge ${s}`})).textContent=`${a} ${t}`,o.appendChild(n),o))}),O.badgeEls=R}var w=(e.projects||[]).map(e=>{var a=(e.daily||[]).filter(e=>e.date>=s);if(0===a.length)return null;var t={name:e.name,path:e.path,daily:a,provider:e.provider,sessions:sumBy(a,"sessions"),messages:sumBy(a,"messages"),cost:sumBy(a,"cost")};return PROVIDERS.forEach(s=>{void 0!==e[s.key+"Cost"]&&(t[s.key+"Cost"]=sumBy(a,s.key+"Cost"))}),t}).filter(e=>e&&e.sessions>0).sort((e,a)=>a.cost-e.cost);return O.projects=w,O.pricingNote="Models are sorted by estimated cost usage for this selected range.",O}function makeLegend(e){var a=el("div",{class:"chart-legend"});return PROVIDERS.forEach(t=>{if(!e||-1!==e.indexOf(t.key)){var s=el("span");s.appendChild(el("span",{class:"swatch",style:`background:${t.color}`})),s.appendChild(document.createTextNode(t.label)),a.appendChild(s)}}),a}function stackedGradient(e){var a=0;if(e.forEach(e=>{a+=e.value}),a<=0)return"#e2e8f0";var t=[],s=0;return e.forEach(e=>{if(!(e.value<=0)){var l=e.value/a*100;t.push(`${e.color} ${s.toFixed(2)}% ${(s+l).toFixed(2)}%`),s+=l}}),1===t.length?e.filter(e=>e.value>0)[0].color:`linear-gradient(to top, ${t.join(", ")})`}function renderHeatmap(e,a,t){var s={};a.forEach(e=>{s[e.date]=e});var l=new Date;l.setHours(0,0,0,0);var o=l.getDay(),n=new Date(l);n.setDate(n.getDate()+(6-o));var r=new Date(n);r.setDate(r.getDate()-364+1);for(var d=[],i=[],c=new Date(r);c<=n;){var p=c.toISOString().slice(0,10),h=s[p]||null,u=h&&h.cost||0;u>0&&i.push(u),d.push({date:p,cost:u,sessions:h&&h.sessions||0}),c.setDate(c.getDate()+1)}i.sort((e,a)=>e-a);var v=i.length>0?i[Math.floor(.25*i.length)]:0,m=i.length>0?i[Math.floor(.5*i.length)]:0,g=i.length>0?i[Math.floor(.75*i.length)]:0;function f(e){return e<=0?"var(--heatmap-empty, var(--border-main))":hexToRgba(t,e<v?.2:e<m?.4:e<g?.6:.9)}for(var C=el("div",{class:"heatmap-months"}),y=-1,D=[],k=0;k<52;k++){var b=new Date(r);b.setDate(b.getDate()+7*k);var S=b.getMonth();S!==y&&(D.push({week:k,label:b.toLocaleString("en-US",{month:"short"})}),y=S)}D.forEach((e,a)=>{var t=(a+1<D.length?D[a+1].week:52)-e.week;C.appendChild(el("span",{class:"heatmap-month-label",style:"flex:"+t},e.label))});for(var E=el("div",{class:"heatmap-days"}),$=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],x=0;x<7;x++){var O=1===x||3===x||5===x;E.appendChild(el("div",{class:"heatmap-day-label"},O?$[x].slice(0,3):""))}var R=el("div",{class:"heatmap-grid",style:"grid-template-columns:repeat(52,1fr)"});d.forEach(e=>{var a=new Date(e.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"}),t=e.cost>0?a+": $"+e.cost.toFixed(2)+" ("+e.sessions+" sess)":a+": no activity";R.appendChild(el("div",{class:"heatmap-cell",style:"background:"+f(e.cost),title:t}))});var w=el("div",{class:"heatmap-legend"});w.appendChild(document.createTextNode("Less")),[0,.2,.4,.6,.9].forEach(e=>{var a=0===e?"var(--heatmap-empty, var(--border-main))":hexToRgba(t,e);w.appendChild(el("div",{class:"heatmap-legend-cell",style:"background:"+a}))}),w.appendChild(document.createTextNode("More")),C.style.marginLeft="30px",e.appendChild(C);var M=el("div",{class:"heatmap-wrap"});return M.appendChild(E),M.appendChild(R),e.appendChild(M),w}function hexToRgba(e,a){return 3===(e=e.replace("#","")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"rgba("+parseInt(e.substring(0,2),16)+","+parseInt(e.substring(2,4),16)+","+parseInt(e.substring(4,6),16)+","+a+")"}function renderBarChart(e,a,t,s,l){e.textContent="",a.forEach(a=>{var o=0===a.sessions,n=o?0:Math.max(4,a.messages/t*140),r=el("div",{class:"bar-group"}),d=s;l&&!o&&a.cost>0&&(d=stackedGradient(PROVIDERS.map(e=>({color:e.color,value:a[e.key+"Cost"]||0}))));var i=el("div",{class:"bar",style:`height:${o?"2":n}px;background:${o?"#e2e8f0":d};`}),c=`${fullDateStr(a.date)} | ${fmtUSD(a.cost)}`;l?PROVIDERS.forEach(e=>{a[e.key+"Cost"]&&(c+=`\n${e.label} ${fmtUSD(a[e.key+"Cost"])}`)}):c+=`, ${a.sessions} sessions`,i.appendChild(el("div",{class:"tooltip"},c)),r.appendChild(i),r.appendChild(el("div",{class:"bar-label"},a.date.slice(5))),e.appendChild(r)})}function renderWeeklyChart(e,a,t,s,l){e.textContent="";var o=1;a.forEach(e=>{t[e].cost>o&&(o=t[e].cost)}),a.forEach(a=>{var n=t[a],r=Math.max(8,n.cost/o*130),d=el("div",{class:"bar-group"});d.appendChild(el("div",{class:"bar-cost",style:`color:${s}`},fmtUSD(n.cost)));var i=s;l&&n.cost>0&&(i=stackedGradient(PROVIDERS.map(e=>({color:e.color,value:n[e.key+"Cost"]||0}))));var c=el("div",{class:"bar",style:`height:${r}px;background:${i};`}),p=`${weekLabel(a)} | ${fmtUSD(n.cost)}`;l?PROVIDERS.forEach(e=>{n[e.key+"Cost"]&&(p+=`\n${e.label} ${fmtUSD(n[e.key+"Cost"])}`)}):p+=`, ${n.sessions} sessions`,c.appendChild(el("div",{class:"tooltip"},p)),d.appendChild(c),d.appendChild(el("div",{class:"bar-label"},weekLabel(a))),e.appendChild(d)})}var PROJ_COLORS=["#D37356","#7385FE","#047857","#e4a222","#8b5cf6","#ec4899","#14b8a6","#f97316","#6366f1","#84cc16"];function renderProjects(e,a,t,s){if(a&&a.length){var l=el("div",{class:"section"});l.appendChild(el("h2",null,"Projects"));var o=el("div",{class:"proj-wrap"}),n=0;a.forEach(e=>{n+=e.cost});var r=[],d=0,i=0;a.forEach((e,a)=>{a<5?r.push({name:e.name,cost:e.cost,sessions:e.sessions,color:PROJ_COLORS[a%PROJ_COLORS.length]}):(d+=e.cost,i+=e.sessions)}),d>0&&r.push({name:`Other (${a.length-5})`,cost:d,sessions:i,color:"#cbd5e1"});var c=[],p=0;r.forEach(e=>{var a=n>0?e.cost/n*100:0;c.push(`${e.color} ${p.toFixed(2)}% ${(p+a).toFixed(2)}%`),p+=a});var h=el("div",{class:"proj-donut",style:`background:conic-gradient(${c.join(",")});`});h.appendChild(el("div",{class:"proj-donut-hole"})),o.appendChild(h);var u=el("div",{class:"proj-legend"});if(r.forEach(e=>{var a=el("div",{class:"proj-legend-row"});a.appendChild(el("span",{class:"proj-swatch",style:`background:${e.color}`})),a.appendChild(el("span",{class:"proj-legend-name"},e.name));var t=el("span",{class:"proj-legend-meta"});t.appendChild(el("span",{class:"proj-cost"},fmtUSD(e.cost))),t.appendChild(el("span",{class:"proj-sessions"},`${e.sessions} sess`)),a.appendChild(t),u.appendChild(a)}),a.length>5){var v=el("div",{class:"proj-more-list"});a.slice(5).forEach((e,a)=>{var t=el("div",{class:"proj-more-row"});t.appendChild(el("span",{class:"proj-swatch",style:"background:#cbd5e1"})),t.appendChild(el("span",{class:"proj-legend-name"},e.name));var s=el("span",{class:"proj-legend-meta"});s.appendChild(el("span",{class:"proj-cost"},fmtUSD(e.cost))),s.appendChild(el("span",{class:"proj-sessions"},`${e.sessions} sess`)),t.appendChild(s),v.appendChild(t)}),v.style.display="none";var m=el("button",{class:"proj-toggle",type:"button"},`Show ${a.length-5} more`),g=!1;m.addEventListener("click",()=>{g=!g,v.style.display=g?"block":"none",m.textContent=g?"Show less":`Show ${a.length-5} more`}),u.appendChild(m),u.appendChild(v)}o.appendChild(u),l.appendChild(o),e.appendChild(l)}}function renderPanel(e,a){var t=a.accent;e.textContent="",e.style.setProperty("--accent",t);var s=el("div",{class:"freshness-banner"}),l=el("span",{class:"date-info"});l.appendChild(document.createTextNode("Sessions: ")),l.appendChild(el("span",{class:"date-val"},String(a.totalSessions))),s.appendChild(l);var o=el("div",{style:"display:flex;gap:6px;align-items:center;"});a.badgeEls?.length&&a.badgeEls.forEach(e=>{o.appendChild(e)});var n=el("button",{class:"more-stats-toggle",type:"button"});n.textContent="More ▾",o.appendChild(n),s.appendChild(o),e.appendChild(s);var r=a.firstDate?new Date(a.firstDate):new Date,d=Math.ceil((Date.now()-r)/864e5)+1,i=a.tokenBreakdown,c=el("div",{class:"stats-grid"}),p=el("div",{class:"stat-card"});p.appendChild(el("div",{class:"stat-label"},"Total Est. Cost")),p.appendChild(el("div",{class:"stat-value cost"},fmtUSD(a.displayCost))),p.appendChild(el("div",{class:"stat-sub"},`${fullDateFromIso(a.firstDate)} - today`)),p.appendChild(el("div",{class:"stat-sub"},`${d}d span, ${a.daysActive} active`)),c.appendChild(p),c.appendChild(createStatCard("Cost / Day",fmtUSD(a.costPerDay),"cost",`avg across ${a.daysActive} days`)),c.appendChild(createStatCard("Cost / Session",fmtUSD(a.costPerSession),"cost",`${a.totalSessions} total sessions`)),c.appendChild(createStatCard("Streak",`${a.streak} days`));var h=a.totalSessions>0?a.userMessages/a.totalSessions:0;c.appendChild(createStatCard("Msgs / Session",h.toFixed(1)));var u=createStatCard("Tokens",fmt(a.totalTokens||0));if(i){u.style.position="relative",u.classList.add("has-tooltip");var v=u.querySelector(".stat-label");v&&v.appendChild(el("span",{class:"info-icon"},"i"));var m=[];i.input&&m.push(`Input: ${fmt(i.input)}`),i.output&&m.push(`Output: ${fmt(i.output)}`),i.cacheRead&&m.push(`Cache Read: ${fmt(i.cacheRead)}`),i.cacheWrite&&m.push(`Cache Write: ${fmt(i.cacheWrite)}`),i.cached&&m.push(`Cached: ${fmt(i.cached)}`),i.reasoning&&m.push(`Reasoning: ${fmt(i.reasoning)}`),u.appendChild(el("div",{class:"stat-tooltip"},m.join("\n")))}c.appendChild(u);var g=a.displayCost>0?a.outputTokens/a.displayCost:0,f=createStatCard("Output / $",fmt(Math.round(g)));f.style.position="relative",f.classList.add("has-tooltip");var C=f.querySelector(".stat-label");if(C&&C.appendChild(el("span",{class:"info-icon"},"i")),f.appendChild(el("div",{class:"stat-tooltip"},`Output tokens per dollar spent\n${fmt(a.outputTokens)} output / ${fmtUSD(a.displayCost)}`)),c.appendChild(f),i){var y=(i.cacheRead||0)+(i.cached||0)+(i.cacheWrite||0),D=createStatCard("Cache Rate",`${(a.totalTokens>0?y/a.totalTokens*100:0).toFixed(1)}%`);D.style.position="relative",D.classList.add("has-tooltip");var k=D.querySelector(".stat-label");k&&k.appendChild(el("span",{class:"info-icon"},"i"));var b=["Cache tokens as % of all tokens"];i.cacheRead&&b.push(`Cache Read: ${fmt(i.cacheRead)}`),i.cached&&b.push(`Cached: ${fmt(i.cached)}`),i.cacheWrite&&b.push(`Cache Write: ${fmt(i.cacheWrite)}`),b.push(`Total: ${fmt(y)} / ${fmt(a.totalTokens)}`),D.appendChild(el("div",{class:"stat-tooltip"},b.join("\n"))),c.appendChild(D)}e.appendChild(c);var S=el("div",{class:"stats-grid stats-more"});S.style.display="none",S.appendChild(createStatCard("Messages",a.userMessages.toLocaleString()));var E=createStatCard("Output %",`${(a.totalTokens>0?a.outputTokens/a.totalTokens*100:0).toFixed(1)}%`);E.style.position="relative",E.classList.add("has-tooltip");var $=E.querySelector(".stat-label");$&&$.appendChild(el("span",{class:"info-icon"},"i")),E.appendChild(el("div",{class:"stat-tooltip"},`Output tokens as % of all tokens\n${fmt(a.outputTokens)} / ${fmt(a.totalTokens)}`)),S.appendChild(E),a.extraCards&&a.extraCards.forEach(e=>{S.appendChild(e)}),e.appendChild(S);var x=!1;if(n.addEventListener("click",()=>{x=!x,S.style.display=x?"":"none",n.textContent=x?"Less ▴":"More ▾"}),a.allDays&&a.allDays.length>0){var O=el("div",{class:"section"}),R=el("div",{class:"section-header"});R.appendChild(el("h2",null,"Activity"));var w=renderHeatmap(O,a.allDays,t);w&&R.appendChild(w),O.insertBefore(R,O.firstChild),e.appendChild(O)}var M=el("div",{class:"section"});M.appendChild(el("h2",null,"Daily Activity"));var A=el("div",{class:"chart-container"});a.stacked&&A.appendChild(makeLegend(a.activeProviders));var T=el("div",{class:"bar-chart"});if(renderBarChart(T,a.allDays,a.maxMsg,t,a.stacked),A.appendChild(T),M.appendChild(A),e.appendChild(M),a.weeklySorted&&a.weeklySorted.length>0){var P=el("div",{class:"section"});P.appendChild(el("h2",null,"Weekly Usage"));var j=el("div",{class:"chart-container"});a.stacked&&j.appendChild(makeLegend(a.activeProviders));var I=el("div",{class:"weekly-chart"});renderWeeklyChart(I,a.weeklySorted,a.weeklyMap,t,a.stacked),j.appendChild(I),P.appendChild(j),e.appendChild(P)}if(a.projects&&a.projects.length>0&&renderProjects(e,a.projects,t,a.stacked),a.modelUsage&&a.modelUsage.length>0){var U=el("div",{class:"section"});U.appendChild(el("h2",null,"Usage by Model"));var L=a.modelUsage[0].cost||1,_=!!a.showProviderBadge,V=el("div",{class:"model-usage-list"});a.modelUsage.forEach(e=>{var a=el("div",{class:"mu-row"}),t=el("div",{class:"mu-left"});if(t.appendChild(createModelTag(e.id)),_){var s=PROVIDER_MAP[e.provider]||PROVIDER_MAP.claude,l=el("span",{class:`sub-badge ${s.key}`});l.textContent=s.label,t.appendChild(l)}a.appendChild(t);var o=el("div",{class:"mu-right"}),n=Math.max(2,e.cost/L*100),r=PROVIDER_MAP[e.provider]?PROVIDER_MAP[e.provider].color:CLAUDE_COLOR;o.appendChild(el("div",{class:"mu-bar",style:`width:${n}%;background:${r};`})),o.appendChild(el("span",{class:"mu-cost"},fmtUSD(e.cost))),a.appendChild(o),V.appendChild(a)}),U.appendChild(V),e.appendChild(U)}if(a.dailyRows&&a.dailyRows.length>0){var B=el("div",{class:"section"}),N="model"===a.dailyCostView?"model":a.stacked?"agent":"model",F=el("div",{style:"display:flex;justify-content:space-between;align-items:center;gap:10px;"});if(F.appendChild(el("h2",null,"Daily Cost")),a.stacked&&"function"==typeof a.onDailyCostViewChange){var W=el("div",{class:"daily-view-toggle"});[{id:"agent",label:"Agent"},{id:"model",label:"Model"}].forEach(e=>{var t=el("button",{class:"daily-view-btn"+(N===e.id?" active":""),"data-view":e.id,type:"button"},e.label);t.addEventListener("click",()=>{N!==e.id&&a.onDailyCostViewChange(e.id)}),W.appendChild(t)}),F.appendChild(W)}B.appendChild(F);var H=el("table"),q=el("thead"),G=el("tr");G.appendChild(el("th",null,"Date")),G.appendChild(el("th",{class:"r"},"Sessions")),G.appendChild(el("th",null,"agent"===N?"Agents":"Models")),G.appendChild(el("th",{class:"r"},"Est. Cost")),q.appendChild(G),H.appendChild(q);var J=el("tbody"),K={},Y={};function Z(e){if(Object.hasOwn(K,e))return K[e];var a=modelUsageKey(e);return Y[a]||0}a.modelUsage?.length&&a.modelUsage.forEach(e=>{var a=e.id,t=modelUsageKey(a),s=e.cost||0;K[a]=Math.max(K[a]||0,s),Y[t]=(Y[t]||0)+s}),a.dailyRows.forEach(e=>{var s=el("tr");s.appendChild(el("td",null,fullDateStr(e.date))),s.appendChild(el("td",{class:"num"},String(e.sessions)));var l=el("td"),o=t,n=null;if("agent"===N&&a.stacked){var r=rowAgentCosts(e);r.sort((e,a)=>e.cost!==a.cost?a.cost-e.cost:e.label.localeCompare(a.label)),r.length?(r.forEach(e=>{var a=el("span",{class:`sub-badge ${e.key}`,style:"margin-left:0;margin-right:6px;"},e.label);l.appendChild(a)}),o=r[0].color):l.textContent="-"}else if(e.models?.length){var d=e.models.slice().sort((a,t)=>{var s=e.modelCosts||{},l=s[a]||0,o=s[t]||0;if(l!==o)return o-l;var n=Z(a),r=Z(t);if(n!==r)return r-n;var d=modelSortKey(a),i=modelSortKey(t);return d!==i?d-i:a.localeCompare(t)});d.length&&(n=d[0]),d.forEach(e=>{l.appendChild(createModelTag(e)),l.appendChild(document.createTextNode(" "))}),n&&(o=colorForModel(n))}else l.textContent="-";s.appendChild(l),s.appendChild(el("td",{class:"cost-cell",style:`color:${o}`},fmtUSD(e.cost))),J.appendChild(s)}),H.appendChild(J),B.appendChild(H),e.appendChild(B)}if(a.pricingNote){var z=el("div",{class:"pricing-note"});z.textContent=a.pricingNote,e.appendChild(z)}}function main(){var e={};PROVIDERS.forEach(a=>{e[a.key]=null!=DATA[a.key]?DATA[a.key]:null});var a=PROVIDERS.filter(a=>null!=e[a.key]),t="this_month",s="agent",l={};a.forEach(a=>{l[a.key]=buildOpts(e[a.key])});var o,n=mergeOpts(a.map(e=>l[e.key])),r=document.getElementById("tab-bar");if(a.length>=2){var d=el("button",{class:"tab-btn","data-tab":"all"},[el("span",null,"All")]);d.addEventListener("click",()=>{h("all")}),r.appendChild(d),o="all"}else o=1===a.length?a[0].key:null;a.forEach(e=>{var a="undefined"!=typeof DATA&&DATA&&DATA.appMeta?DATA.appMeta:{},t=a.assetBase?toFileUrl(a.assetBase):"",s=[];if(t){var l=el("img",{class:"tab-icon",src:`${t}/${e.key}.webp`,alt:`${e.label} logo`});l.onerror=function(){this.style.display="none"},s.push(l)}s.push(el("span",null,e.label));var o=el("button",{class:"tab-btn","data-tab":e.key},s);o.addEventListener("click",()=>{h(e.key)}),r.appendChild(o)});var i=document.getElementById("range-select");function c(){if(a.length>=2){var e=applyRange(n,t);e.dailyCostView=s,e.onDailyCostViewChange=e=>{s="model"===e?"model":"agent",c()},renderPanel(document.getElementById("panel-all"),e)}a.forEach(e=>{var a=applyRange(l[e.key],t);a.dailyCostView="model",renderPanel(document.getElementById("panel-"+e.key),a)})}function p(e){t=e,i&&i.value!==e&&(i.value=e),c()}function h(e){document.querySelectorAll(".tab-btn").forEach(e=>{e.classList.remove("active")}),document.querySelectorAll(".tab-panel").forEach(e=>{e.classList.remove("active")});var a=document.querySelector(`[data-tab="${e}"]`);a&&a.classList.add("active");var t=document.getElementById(`panel-${e}`);t&&t.classList.add("active"),history.replaceState(null,"",`#${e}`)}RANGE_OPTIONS.forEach(e=>{var a=el("option",{value:e.id},e.label);i.appendChild(a)}),i.addEventListener("change",()=>{p(i.value)}),p(t);var u=location.hash.replace("#",""),v=a.map(e=>e.key);a.length>=2&&v.unshift("all");var m=DATA.defaultTab||null;-1!==v.indexOf(u)?h(u):m&&-1!==v.indexOf(m)?h(m):o&&h(o)}renderFooter(),(()=>{var e="code-usage-theme",a=document.documentElement,t=null;try{t=localStorage.getItem(e)}catch(e){}t&&-1!==["system","light","dark"].indexOf(t)&&a.setAttribute("data-theme",t);var s=document.getElementById("theme-toggle");s&&(l(a.getAttribute("data-theme")||"system"),s.addEventListener("click",t=>{var s=t.target.closest(".theme-btn");if(s){var o=s.getAttribute("data-theme");if(o){a.setAttribute("data-theme",o),l(o);try{localStorage.setItem(e,o)}catch(e){}}}}));function l(e){s.querySelectorAll(".theme-btn").forEach(a=>{a.classList.toggle("active",a.getAttribute("data-theme")===e)})}})(),(()=>{var e=document.getElementById("gen-time");if(e&&DATA.metadata&&DATA.metadata.createdAt){var a,t=Math.floor((Date.now()-new Date(DATA.metadata.createdAt).getTime())/1e3);a=t<5?"just now":t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`,e.textContent=`${e.textContent} (${a})`}})();var hasAnyData=PROVIDERS.some(e=>null!=DATA[e.key]);if(hasAnyData)main();else{var esDiv=el("div",{class:"empty-state"});esDiv.appendChild(el("h2",null,"Welcome to Code Usage")),esDiv.appendChild(el("p",null,"No usage data found. Start using a supported AI coding tool:"));var esUl=el("ul",{class:"provider-list"});esUl.appendChild(el("li",null,[el("a",{href:"https://claude.ai/code"},"Claude Code")])),esUl.appendChild(el("li",null,[el("a",{href:"https://github.com/openai/codex"},"Codex CLI")])),esUl.appendChild(el("li",null,[el("a",{href:"https://github.com/nicepkg/opencode"},"OpenCode")])),esUl.appendChild(el("li",null,[el("a",{href:"https://ampcode.com"},"Amp")])),esUl.appendChild(el("li",null,[el("a",{href:"https://github.com/anthropics/pi-agent"},"Pi-Agent")])),esDiv.appendChild(esUl);var esHint=el("p");esHint.appendChild(document.createTextNode("Then run ")),esHint.appendChild(el("code",null,"npx code-usage")),esHint.appendChild(document.createTextNode(" again.")),esDiv.appendChild(esHint),document.querySelector(".container").insertAdjacentElement("afterbegin",esDiv)}
</script>
</body>
</html>
