<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Code Usage Dashboard</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;background:#f8fafc;color:#334155;line-height:1.6}.header{border-bottom:1px solid #e2e8f0}.header-inner{max-width:1100px;margin:0 auto;padding:24px 24px 0}.header-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.header h1{font-size:24px;font-weight:700;color:#0f172a}.header .sub{font-size:13px;color:#64748b;margin-top:4px}.header .gen-time{font-size:11px;color:#94a3b8;text-align:right}.header-meta{text-align:right}.header-links{font-size:11px;margin-top:4px}.header-links a{color:#94a3b8;text-decoration:none;font-weight:500}.header-links a:hover{color:#64748b;text-decoration:underline}.header-links .link-dot{color:#cbd5e1;margin:0 4px}.container{max-width:1100px;margin:0 auto;padding:24px}.header-controls{display:flex;justify-content:space-between;align-items:flex-end;gap:12px}.tab-bar{display:flex;gap:4px;margin:0;background:#e2e8f0;border-radius:10px 10px 0 0;padding:4px 4px 0;width:fit-content}.tab-btn{padding:8px 20px 10px;border-radius:8px 8px 0 0;border:none;background:0 0;font-size:13px;font-weight:600;color:#64748b;cursor:pointer;transition:.2s;display:inline-flex;align-items:center;gap:7px}.tab-icon{width:15px;height:15px;object-fit:contain;flex:0 0 auto}.tab-btn:hover{color:#334155}.tab-btn.active[data-tab=all]{background:#f8fafc;color:#3b82f6;box-shadow:none;border-bottom:2px solid #3b82f6}.tab-btn.active[data-tab=claude]{background:#f8fafc;color:#d37356;box-shadow:none;border-bottom:2px solid #d37356}.tab-btn.active[data-tab=codex]{background:#f8fafc;color:#7385fe;box-shadow:none;border-bottom:2px solid #7385fe}.tab-btn.active[data-tab=opencode]{background:#f8fafc;color:#10b981;box-shadow:none;border-bottom:2px solid #10b981}.range-control{display:flex;align-items:center;gap:8px;margin-bottom:6px}.range-label{font-size:12px;color:#64748b;font-weight:600;white-space:nowrap}.range-select{border:1px solid #cbd5e1;background:#fff;border-radius:8px;padding:6px 10px;font-size:12px;color:#0f172a;font-weight:600}.daily-view-toggle{display:inline-flex;gap:4px;background:#e2e8f0;border-radius:8px;padding:3px}.daily-view-btn{border:none;background:0 0;color:#64748b;font-size:12px;font-weight:600;padding:5px 10px;border-radius:6px;cursor:pointer}.daily-view-btn.active{background:#fff;color:#0f172a;box-shadow:0 1px 2px rgba(0,0,0,.08)}.tab-panel{display:none}.tab-panel.active{display:block}.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:28px}.stat-card{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:20px;box-shadow:0 1px 3px rgba(0,0,0,.04)}.stat-label{font-size:11px;text-transform:uppercase;letter-spacing:.05em;color:#94a3b8;margin-bottom:6px}.stat-value{font-size:28px;font-weight:700;color:#0f172a}.stat-value.cost{color:var(--accent,#d37356)}.stat-sub{font-size:12px;color:#94a3b8;margin-top:2px}.info-icon{display:inline-flex;align-items:center;justify-content:center;width:14px;height:14px;border-radius:50%;background:#e2e8f0;color:#64748b;font-size:9px;font-weight:700;font-style:italic;margin-left:5px;vertical-align:middle;cursor:help}.has-tooltip{cursor:help}.stat-tooltip{display:none;position:absolute;bottom:calc(100% + 8px);left:50%;transform:translateX(-50%);background:#1e293b;color:#f1f5f9;padding:10px 14px;border-radius:8px;font-size:12px;white-space:pre-line;line-height:1.6;z-index:9999;pointer-events:none;box-shadow:0 4px 12px rgba(0,0,0,.15);min-width:150px}.has-tooltip:hover .stat-tooltip{display:block}.section{margin-bottom:28px}.section h2{font-size:16px;font-weight:600;color:#1e293b;margin-bottom:14px;padding-bottom:8px;border-bottom:1px solid #e2e8f0}table{width:100%;border-collapse:collapse;font-size:13px}th{text-align:left;padding:10px 14px;color:#94a3b8;font-weight:600;font-size:11px;text-transform:uppercase;letter-spacing:.05em;border-bottom:2px solid #e2e8f0}th.r{text-align:right}td{padding:10px 14px;border-bottom:1px solid #f1f5f9;color:#475569}tr:hover td{background:#f8fafc}td.num{text-align:right;font-variant-numeric:tabular-nums}td.cost-cell{font-weight:600;text-align:right;font-variant-numeric:tabular-nums}.model-tag{display:inline-block;padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600}.model-opus{background:#f9e8e3;color:#a8533a}.model-sonnet{background:#fdf1ec;color:#c47a5f}.model-haiku{background:#d1fae5;color:#047857}.model-codex{background:#e3e8fe;color:#4a5fc7}.proj-wrap{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:24px;box-shadow:0 1px 3px rgba(0,0,0,.04);display:flex;align-items:center;gap:32px}.proj-donut{width:160px;height:160px;border-radius:50%;position:relative;flex-shrink:0}.proj-donut-hole{position:absolute;top:50%;left:50%;width:90px;height:90px;background:#fff;border-radius:50%;transform:translate(-50%,-50%)}.proj-legend{flex:1;min-width:0}.proj-legend-row,.proj-more-row{display:flex;align-items:center;gap:10px;padding:6px 0}.proj-swatch{width:10px;height:10px;border-radius:3px;flex-shrink:0}.proj-legend-name{font-size:13px;font-weight:600;color:#1e293b;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.proj-legend-meta{display:flex;gap:10px;align-items:baseline;white-space:nowrap}.proj-cost{font-size:13px;font-weight:700;color:#0f172a;font-variant-numeric:tabular-nums}.proj-sessions{font-size:12px;color:#94a3b8}.proj-toggle{background:0 0;border:none;color:#64748b;font-size:12px;font-weight:600;cursor:pointer;padding:8px 0 0}.proj-toggle:hover{color:#334155}.proj-more-list{border-top:1px solid #f1f5f9;margin-top:4px;padding-top:4px}@media (max-width:768px){.proj-wrap{flex-direction:column;align-items:stretch}.proj-donut{margin:0 auto}}.chart-container{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:40px 20px 20px;box-shadow:0 1px 3px rgba(0,0,0,.04);overflow:visible}.bar-chart{display:flex;align-items:flex-end;gap:3px;height:160px;position:relative}.bar-group{display:flex;flex-direction:column;align-items:center;flex:1;min-width:18px}.bar{width:100%;min-width:12px;max-width:28px;border-radius:3px 3px 0 0;transition:background .2s;cursor:pointer;position:relative}.bar:hover{filter:brightness(.9)}.bar-label{font-size:9px;color:#94a3b8;margin-top:6px;writing-mode:vertical-lr;text-orientation:mixed;transform:rotate(180deg);max-height:50px;overflow:hidden}.tooltip{display:none;position:absolute;bottom:calc(100% + 8px);left:50%;transform:translateX(-50%);background:#1e293b;color:#f1f5f9;padding:8px 12px;border-radius:6px;font-size:11px;white-space:pre-line;min-width:170px;max-width:280px;line-height:1.35;text-align:left;z-index:9999;pointer-events:none;box-shadow:0 4px 12px rgba(0,0,0,.15)}.chart-legend{display:flex;gap:14px;margin-bottom:8px;justify-content:flex-end;font-size:11px;color:#64748b}.chart-legend .swatch{display:inline-block;width:10px;height:10px;border-radius:2px;margin-right:4px;vertical-align:middle}.bar:hover .tooltip{display:block}.weekly-chart{display:flex;align-items:flex-end;gap:12px;height:160px;justify-content:center;position:relative}.weekly-chart .bar-group{display:flex;flex-direction:column;align-items:center;flex:1;max-width:120px}.weekly-chart .bar{width:100%;max-width:120px;min-width:40px;border-radius:6px 6px 0 0;transition:background .2s;cursor:pointer;position:relative}.weekly-chart .bar-label{font-size:11px;color:#64748b;margin-top:8px;writing-mode:horizontal-tb;transform:none;text-align:center;max-height:none;font-weight:500}.weekly-chart .bar-cost{font-size:11px;font-weight:600;margin-bottom:4px}.pricing-note{font-size:12px;color:#94a3b8;margin-top:16px;padding:12px;background:#fff;border-radius:8px;border:1px solid #e2e8f0}.model-usage-list{background:#fff;border:1px solid #e2e8f0;border-radius:12px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.04)}.mu-row{display:flex;align-items:center;padding:12px 16px;border-bottom:1px solid #f1f5f9}.mu-row:last-child{border-bottom:none}.mu-left{display:flex;align-items:center;gap:8px;min-width:240px}.mu-right{display:flex;align-items:center;gap:12px;flex:1}.mu-bar{height:8px;border-radius:4px;min-width:2px}.mu-cost{font-size:14px;font-weight:700;color:#0f172a;font-variant-numeric:tabular-nums;white-space:nowrap}.no-data{text-align:center;padding:80px 24px;color:#94a3b8}.no-data h3{font-size:18px;color:#64748b;margin-bottom:8px}.no-data a{color:var(--accent,#d37356)}.footer{text-align:center;margin-top:24px;padding:20px 0 8px;font-size:13px;color:#94a3b8}.footer code{background:#e2e8f0;padding:2px 6px;border-radius:4px;font-size:12px;color:#64748b}.footer a{color:#334155;text-decoration:none;font-weight:600}.footer a:hover{text-decoration:underline}.footer p{margin:4px 0}.freshness-banner{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:12px 16px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;font-size:13px;box-shadow:0 1px 3px rgba(0,0,0,.04)}.freshness-banner .date-info{color:#64748b}.freshness-banner .date-val{color:#0f172a;font-weight:600}.more-stats-toggle{border:1px solid #e2e8f0;background:#fff;color:#64748b;font-size:11px;font-weight:600;padding:3px 10px;border-radius:6px;cursor:pointer;margin-left:6px}.more-stats-toggle:hover{background:#f1f5f9;color:#334155}.sub-badge{display:inline-block;padding:2px 8px;border-radius:4px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin-left:6px;vertical-align:middle}.sub-badge.claude{background:#f9e8e3;color:#a8533a}.sub-badge.codex{background:#e3e8fe;color:#4a5fc7}.model-opencode,.sub-badge.opencode{background:#d1fae5;color:#047857}@media (max-width:768px){.header-inner{padding:16px 16px 0}.header-controls{flex-direction:column;align-items:stretch}.tab-bar{width:100%;justify-content:space-between}.tab-btn{flex:1;text-align:center;padding:8px 8px 10px;justify-content:center}.range-control{justify-content:flex-start;margin-bottom:10px}.stats-grid{grid-template-columns:repeat(2,1fr)}.container{padding:16px}}
</style>
</head>
<body>
<div class="header">
  <div class="header-inner">
    <div class="header-top">
      <div>
        <h1>Code Usage Dashboard</h1>
        <div class="sub">See how much your AI coding actually costs.</div>
      </div>
      <div class="header-meta">
        <div class="gen-time" id="gen-time"></div>
        <div class="header-links">
          <a href="https://www.npmjs.com/package/code-usage" target="_blank" rel="noopener">code-usage</a>
          <span class="link-dot">&middot;</span>
          <a href="https://github.com/onlyoneaman/code-usage" target="_blank" rel="noopener">&#9733; Star on GitHub</a>
          <span class="link-dot">&middot;</span>
          <a href="https://livebench.ai/#/" target="_blank" rel="noopener">LiveBench</a>
        </div>
      </div>
    </div>
    <div class="header-controls">
      <div class="tab-bar" id="tab-bar"></div>
      <div class="range-control">
        <label class="range-label" for="range-select">Range</label>
        <select class="range-select" id="range-select"></select>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div id="panel-all" class="tab-panel"></div>
  <div id="panel-claude" class="tab-panel"></div>
  <div id="panel-codex" class="tab-panel"></div>
  <div id="panel-opencode" class="tab-panel"></div>
  <div class="footer">
    <p>Run <code>code-usage</code> to generate a fresh report.</p>
    <p id="footer-meta"></p>
  </div>
</div>
<script>
// DATA_PLACEHOLDER
function fmt(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":String(e)}function fmtUSD(e){return"$"+e.toFixed(2)}function pad2(e){return e<10?"0"+e:String(e)}function localDateStr(e){return e.getFullYear()+"-"+pad2(e.getMonth()+1)+"-"+pad2(e.getDate())}function fullDateStr(e){var t=String(e||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);return t?t[2]+"-"+t[3]+"-"+t[1]:String(e||"")}function fullDateFromIso(e){if(!e)return"-";var t=new Date(e);return Number.isNaN(t.getTime())?String(e):pad2(t.getMonth()+1)+"-"+pad2(t.getDate())+"-"+t.getFullYear()}function modelUsageKey(e){return String(e||"").replace(/-\d{8}$/,"")}function toFileUrl(e){var t=String(e||"").replace(/\\/g,"/");return t?0===t.indexOf("file://")||0===t.indexOf("http://")||0===t.indexOf("https://")?t:"/"===t.charAt(0)?"file://"+t:"file:///"+t:""}function providerFromModel(e){var t=String(e||"").toLowerCase();return t.startsWith("gpt-")?"codex":t.startsWith("claude-")||-1!==t.indexOf("opus")||-1!==t.indexOf("sonnet")||-1!==t.indexOf("haiku")?"claude":"opencode"}function colorForModel(e){var t=String(e||"").toLowerCase();return t.startsWith("gpt-")?CODEX_COLOR:-1!==t.indexOf("haiku")?"#047857":-1!==t.indexOf("sonnet")?"#c47a5f":t.startsWith("claude-")||-1!==t.indexOf("opus")?CLAUDE_COLOR:OPENCODE_COLOR}function rowAgentCosts(e){var t=0,a=0,s=0,o=e&&e.modelCosts?e.modelCosts:null;if(o)for(var n in o){var l=providerFromModel(n);"codex"===l?a+=o[n]||0:"opencode"===l?s+=o[n]||0:t+=o[n]||0}return{claude:t,codex:a,opencode:s}}var MONTHS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function el(e,t,a){var s=document.createElement(e);if(t)for(var o in t)"class"===o?s.className=t[o]:"style"===o?s.style.cssText=t[o]:s.setAttribute(o,t[o]);return a&&("string"==typeof a?s.textContent=a:Array.isArray(a)?a.forEach(function(e){e&&s.appendChild(e)}):s.appendChild(a)),s}function createStatCard(e,t,a,s){var o=el("div",{class:"stat-card"});return o.appendChild(el("div",{class:"stat-label"},e)),o.appendChild(el("div",{class:"stat-value"+(a?" "+a:"")},t)),s&&o.appendChild(el("div",{class:"stat-sub"},s)),o}function renderFooter(){var e=document.getElementById("footer-meta");if(e){var t="undefined"!=typeof DATA&&DATA&&DATA.appMeta?DATA.appMeta:{},a=t.authorName||"Aman",s=t.authorUrl||"https://x.com/onlyoneaman",o=t.repoUrl||"https://github.com/onlyoneaman/code-usage",n=(t.packageUrl,t.name,t.version||"");e.textContent="",e.appendChild(document.createTextNode("Made with ❤️ by ")),e.appendChild(el("a",{href:s,target:"_blank",rel:"noopener noreferrer"},a)),n&&e.appendChild(document.createTextNode(" · v"+n)),e.appendChild(document.createTextNode(" · ")),e.appendChild(el("a",{href:o,target:"_blank",rel:"noopener noreferrer"},"GitHub"));var l=el("p",{style:"margin-top:6px;"});l.appendChild(document.createTextNode("If you liked it, ")),l.appendChild(el("a",{href:o,target:"_blank",rel:"noopener noreferrer"},"star on GitHub")),l.appendChild(document.createTextNode(" · Feedback/bugs? ")),l.appendChild(el("a",{href:s,target:"_blank",rel:"noopener noreferrer"},"Contact "+a)),e.parentNode.appendChild(l)}}var MODEL_ORDER=["opus-4-6","opus-4-5","opus-4-1","opus-4","sonnet-4-5","sonnet-4","sonnet-3-7","haiku-4-5","haiku-3-5","gpt-5.3","gpt-5.2","gpt-5.1","gpt-5-codex"];function modelSortKey(e){for(var t=0;t<MODEL_ORDER.length;t++)if(e.includes(MODEL_ORDER[t]))return t;return 99}function createModelTag(e){if(e.startsWith("gpt-"))return el("span",{class:"model-tag model-codex"},e);if(e.startsWith("claude-")||-1!==e.indexOf("opus")||-1!==e.indexOf("sonnet")||-1!==e.indexOf("haiku")){var t=e.replace("claude-","").replace(/-\d{8}$/,""),a=t.split("-");t=a[0].charAt(0).toUpperCase()+a[0].slice(1)+" "+a.slice(1).join(".");var s="model-tag model-sonnet";return e.includes("opus")?s="model-tag model-opus":e.includes("haiku")&&(s="model-tag model-haiku"),el("span",{class:s},t)}return el("span",{class:"model-tag model-opencode"},e)}function getWeekStart(e){var t=new Date(e+"T12:00:00"),a=t.getDay(),s=0===a?6:a-1;return t.setDate(t.getDate()-s),localDateStr(t)}function weekLabel(e){var t=new Date(e+"T12:00:00"),a=new Date(t);return a.setDate(a.getDate()+6),t.getMonth()===a.getMonth()?MONTHS[t.getMonth()]+" "+t.getDate()+"-"+a.getDate():MONTHS[t.getMonth()]+" "+t.getDate()+" - "+MONTHS[a.getMonth()]+" "+a.getDate()}function sumBy(e,t){return e.reduce(function(e,a){return e+(a[t]||0)},0)}function buildOpts(e){var t=e.summary,a=e.accent,s=e.daily.length,o=s>0?t.totalCost/s:0,n=t.totalSessions>0?t.totalCost/t.totalSessions:0,l=t.firstDate?new Date(t.firstDate):new Date,d=localDateStr(new Date),r={};e.daily.forEach(function(e){r[e.date]=e});for(var c=[],i=new Date(l);localDateStr(i)<=d;){var p=localDateStr(i);c.push(r[p]||{date:p,cost:0,sessions:0,messages:0,models:[]}),i.setDate(i.getDate()+1)}var u=1;c.forEach(function(e){e.messages>u&&(u=e.messages)});var h={};e.daily.forEach(function(e){var t=getWeekStart(e.date);h[t]||(h[t]={cost:0,sessions:0}),h[t].cost+=e.cost,h[t].sessions+=e.sessions});var C=Object.keys(h).sort(),f=e.daily.slice().reverse(),v=[];e.extra&&((e.extra.linesAdded||e.extra.linesRemoved)&&v.push(createStatCard("Lines","+"+fmt(e.extra.linesAdded||0)+" / -"+fmt(e.extra.linesRemoved||0))),e.extra.filesModified&&v.push(createStatCard("Files Modified",fmt(e.extra.filesModified))));var m=[];if(e.badge){var g=el("span",{class:"sub-badge "+("claude"===e.provider?"claude":"codex")});g.textContent=e.badge,m.push(el("span",{class:"date-info"},[g]))}var y=e.models.map(function(t){return{id:t.id,cost:t.cost,provider:e.provider}}),D=y.slice().sort(function(e,t){return t.cost-e.cost}),O=(e.projects||[]).map(function(t){return{name:t.name,path:t.path,sessions:t.sessions,messages:t.messages,cost:t.cost,daily:t.daily,provider:e.provider}});return{accent:a,displayCost:t.totalCost,daysActive:s,totalSessions:t.totalSessions,costPerDay:o,costPerSession:n,streak:t.streak,userMessages:t.totalMessages,outputTokens:t.totalOutputTokens,totalTokens:t.totalTokens||0,tokenBreakdown:t.tokenBreakdown||null,firstDate:t.firstDate,allDays:c,maxMsg:u,rawModels:y,modelUsage:D,showProviderBadge:!1,weeklySorted:C,weeklyMap:h,dailyRows:f,extraCards:v,badgeEls:m,pricingNote:e.pricingNote,projects:O}}function mergeOpts(e){var t=e.filter(function(e){return!!e});if(0===t.length)return null;if(1===t.length)return adjustAccent(t[0]);var a=0,s=0,o=0,n=0,l=0,d={input:0,output:0,cacheRead:0,cacheWrite:0,cached:0,reasoning:0};t.forEach(function(e){a+=e.displayCost,s+=e.totalSessions,o+=e.userMessages,n+=e.outputTokens,l+=e.totalTokens||0;var t=e.tokenBreakdown||{};d.input+=t.input||0,d.output+=t.output||0,d.cacheRead+=t.cacheRead||0,d.cacheWrite+=t.cacheWrite||0,d.cached+=t.cached||0,d.reasoning+=t.reasoning||0});var r=[];t.forEach(function(e){var t={};(e.allDays||[]).forEach(function(e){t[e.date]=e}),r.push(t)});var c={};t.forEach(function(e){(e.allDays||[]).forEach(function(e){c[e.date]||(c[e.date]={date:e.date,cost:0,sessions:0,messages:0,claudeCost:0,codexCost:0,opencodeCost:0,claudeSess:0,codexSess:0,opencodeSess:0,claudeMsg:0,codexMsg:0,opencodeMsg:0}),c[e.date].cost+=e.cost,c[e.date].sessions+=e.sessions,c[e.date].messages+=e.messages})});t.forEach(function(e,t){var a=null;a=e.accent===CLAUDE_COLOR?"claude":e.accent===CODEX_COLOR?"codex":"opencode";var s={};for(var o in(e.allDays||[]).forEach(function(e){s[e.date]=e}),c){var n=s[o];n&&(c[o][a+"Cost"]+=n.cost||0,c[o][a+"Sess"]+=n.sessions||0,c[o][a+"Msg"]+=n.messages||0)}});var i=Object.keys(c).sort(),p=i.length?i[0]+"T00:00:00.000Z":null,u=new Date,h=localDateStr(u),C=[];if(i.length)for(var f=new Date(i[0]+"T12:00:00");localDateStr(f)<=h;){var v=localDateStr(f);C.push(c[v]||{date:v,cost:0,sessions:0,messages:0,claudeCost:0,codexCost:0,opencodeCost:0,claudeSess:0,codexSess:0,opencodeSess:0}),f.setDate(f.getDate()+1)}var m=1;C.forEach(function(e){e.messages>m&&(m=e.messages)});var g=C.filter(function(e){return e.sessions>0}).length,y={};C.forEach(function(e){e.sessions>0&&(y[e.date]=!0)});for(var D=0,O=new Date(u);y[localDateStr(O)];)D++,O.setDate(O.getDate()-1);var b={};t.forEach(function(e){var t=e.accent===CLAUDE_COLOR?"claude":e.accent===CODEX_COLOR?"codex":"opencode";for(var a in e.weeklyMap||{})b[a]||(b[a]={cost:0,sessions:0,claudeCost:0,codexCost:0,opencodeCost:0}),b[a].cost+=e.weeklyMap[a].cost||0,b[a].sessions+=e.weeklyMap[a].sessions||0,b[a][t+"Cost"]+=e.weeklyMap[a].cost||0});var x=Object.keys(b).sort(),k={};t.forEach(function(e){(e.dailyRows||[]).forEach(function(e){if(k[e.date]||(k[e.date]={date:e.date,cost:0,sessions:0,messages:0,models:[],modelCosts:{}}),k[e.date].cost+=e.cost,k[e.date].sessions+=e.sessions,k[e.date].messages+=e.messages,e.modelCosts)for(var t in e.modelCosts)k[e.date].modelCosts[t]=(k[e.date].modelCosts[t]||0)+(e.modelCosts[t]||0);e.models&&e.models.forEach(function(t){-1===k[e.date].models.indexOf(t)&&k[e.date].models.push(t)})})});var S=Object.keys(k).sort().reverse().map(function(e){var t=k[e];return t.modelCosts&&(t.models=Object.keys(t.modelCosts).sort(function(e,a){var s=t.modelCosts[e]||0,o=t.modelCosts[a]||0;return s!==o?o-s:e.localeCompare(a)})),t}),E=[];t.forEach(function(e){var t=e.accent===CLAUDE_COLOR?"claude":e.accent===CODEX_COLOR?"codex":"opencode",a=t.charAt(0).toUpperCase()+t.slice(1);"opencode"===t&&(a="OpenCode"),E.push(function(e,t,a){var s=el("span",{class:"date-info"}),o=el("span",{class:"sub-badge "+a});return o.textContent=e+" "+t,s.appendChild(o),s}(a,e.totalSessions,t))});var w=[];t.forEach(function(e){w=w.concat(e.rawModels||[])}),w.sort(function(e,t){return t.cost-e.cost});var M={};t.forEach(function(e){var t=e.accent===CLAUDE_COLOR?"claude":e.accent===CODEX_COLOR?"codex":"opencode";(e.projects||[]).forEach(function(e){M[e.name]||(M[e.name]={name:e.name,path:e.path,sessions:0,messages:0,cost:0,claudeCost:0,codexCost:0,opencodeCost:0,daily:{}}),M[e.name].sessions+=e.sessions,M[e.name].messages+=e.messages,M[e.name].cost+=e.cost,M[e.name][t+"Cost"]+=e.cost||0,(e.daily||[]).forEach(function(a){M[e.name].daily[a.date]||(M[e.name].daily[a.date]={sessions:0,messages:0,cost:0,claudeCost:0,codexCost:0,opencodeCost:0}),M[e.name].daily[a.date].sessions+=a.sessions,M[e.name].daily[a.date].messages+=a.messages,M[e.name].daily[a.date].cost+=a.cost,M[e.name].daily[a.date][t+"Cost"]+=a.cost||0})})});var A=Object.keys(M).map(function(e){var t=M[e];return t.daily=Object.keys(t.daily).sort().map(function(e){var a=t.daily[e];return{date:e,sessions:a.sessions,messages:a.messages,cost:a.cost,claudeCost:a.claudeCost,codexCost:a.codexCost,opencodeCost:a.opencodeCost}}),t}).sort(function(e,t){return t.cost-e.cost}),L=[];return t.forEach(function(e){var t=e.accent===CLAUDE_COLOR?"claude":e.accent===CODEX_COLOR?"codex":"opencode";L.push(t)}),{accent:"#3b82f6",displayCost:a,daysActive:g,totalSessions:s,costPerDay:g>0?a/g:0,costPerSession:s>0?a/s:0,streak:D,userMessages:o,outputTokens:n,totalTokens:l,tokenBreakdown:d,firstDate:p,allDays:C,maxMsg:m,stacked:!0,activeProviders:L,modelUsage:w,showProviderBadge:!0,weeklySorted:x,weeklyMap:b,dailyRows:S,extraCards:[],badgeEls:E,pricingNote:"Combined view across all agents. Models are sorted by estimated cost usage.",projects:A}}function adjustAccent(e){var t=Object.assign({},e);return t.accent="#3b82f6",t}var RANGE_OPTIONS=[{id:"this_week",label:"This Week"},{id:"this_month",label:"This Month"},{id:"this_year",label:"This Year"},{id:"last_30_days",label:"Last 30 Days"},{id:"last_90_days",label:"Last 90 Days"},{id:"all_time",label:"All Time"}];function rangeStart(e){var t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate());if("this_week"===e){var s=a.getDay(),o=0===s?6:s-1;return a.setDate(a.getDate()-o),localDateStr(a)}return"this_month"===e?(a.setDate(1),localDateStr(a)):"this_year"===e?(a.setMonth(0,1),localDateStr(a)):"last_30_days"===e?(a.setDate(a.getDate()-29),localDateStr(a)):"last_90_days"===e?(a.setDate(a.getDate()-89),localDateStr(a)):null}function computeStreak(e){var t={};e.forEach(function(e){e.sessions>0&&(t[e.date]=!0)});for(var a=0,s=new Date;t[localDateStr(s)];)a++,s.setDate(s.getDate()-1);return a}function applyRange(e,t){if(!e)return e;if("all_time"===t){var a=Object.assign({},e);return a.rangeId=t,a.projects=e.projects||[],a}var s=rangeStart(t),o=(e.allDays||[]).filter(function(e){return e.date>=s}),n=(e.dailyRows||[]).filter(function(e){return e.date>=s}),l=sumBy(o,"cost"),d=sumBy(o,"sessions"),r=Math.max(0,e.userMessages||0),c=sumBy(e.allDays||[],"messages"),i=sumBy(o,"messages"),p=r,u=1;r>0&&c>0&&(u=i/c,p=Math.round(r*u));for(var h=o.filter(function(e){return e.sessions>0}).length,C=null,f=0;f<o.length;f++)if(o[f].sessions>0){C=o[f].date+"T00:00:00.000Z";break}var v=1;o.forEach(function(e){e.messages>v&&(v=e.messages)});var m={};o.forEach(function(e){var t=getWeekStart(e.date);m[t]||(m[t]={cost:0,sessions:0,claudeCost:0,codexCost:0,opencodeCost:0}),m[t].cost+=e.cost||0,m[t].sessions+=e.sessions||0,m[t].claudeCost+=e.claudeCost||0,m[t].codexCost+=e.codexCost||0,m[t].opencodeCost+=e.opencodeCost||0});var g=Object.keys(m).sort(),y=e.modelUsage&&e.modelUsage.length?e.modelUsage:e.rawModels||[],D=(e.displayCost||0)>0?l/e.displayCost:0,O=y.map(function(e){return{id:e.id,cost:(e.cost||0)*D,provider:e.provider}}).filter(function(e){return e.cost>0}).sort(function(e,t){return t.cost-e.cost}),b=Math.round((e.outputTokens||0)*u),x=Math.round((e.totalTokens||0)*u),k=null;if(e.tokenBreakdown){var S=e.tokenBreakdown;for(var E in k={},S)S[E]&&(k[E]=Math.round(S[E]*u))}var w=Object.assign({},e,{rangeId:t,allDays:o,maxMsg:v,dailyRows:n,weeklyMap:m,weeklySorted:g,displayCost:l,totalSessions:d,userMessages:p,outputTokens:b,totalTokens:x,tokenBreakdown:k,daysActive:h,firstDate:C,costPerDay:h>0?l/h:0,costPerSession:d>0?l/d:0,streak:computeStreak(o),modelUsage:O});if(w.stacked){var M=[];function A(e,t,a){var s=el("span",{class:"date-info"}),o=el("span",{class:"sub-badge "+a});return o.textContent=e+" "+t,s.appendChild(o),s}var L=sumBy(o,"claudeSess"),T=sumBy(o,"codexSess"),R=sumBy(o,"opencodeSess");L>0&&M.push(A("Claude",L,"claude")),T>0&&M.push(A("Codex",T,"codex")),R>0&&M.push(A("OpenCode",R,"opencode")),w.badgeEls=M}var _=(e.projects||[]).map(function(e){var t=(e.daily||[]).filter(function(e){return e.date>=s});if(0===t.length)return null;var a={name:e.name,path:e.path,daily:t,provider:e.provider,sessions:sumBy(t,"sessions"),messages:sumBy(t,"messages"),cost:sumBy(t,"cost")};return void 0!==e.claudeCost&&(a.claudeCost=sumBy(t,"claudeCost"),a.codexCost=sumBy(t,"codexCost"),a.opencodeCost=sumBy(t,"opencodeCost")),a}).filter(function(e){return e&&e.sessions>0}).sort(function(e,t){return t.cost-e.cost});return w.projects=_,w.pricingNote="Models are sorted by estimated cost usage for this selected range.",w}var CLAUDE_COLOR="#D37356",CODEX_COLOR="#7385FE",OPENCODE_COLOR="#10b981";function makeLegend(e){var t=el("div",{class:"chart-legend"});return[{key:"claude",color:CLAUDE_COLOR,label:"Claude"},{key:"codex",color:CODEX_COLOR,label:"Codex"},{key:"opencode",color:OPENCODE_COLOR,label:"OpenCode"}].forEach(function(a){if(!e||-1!==e.indexOf(a.key)){var s=el("span");s.appendChild(el("span",{class:"swatch",style:"background:"+a.color})),s.appendChild(document.createTextNode(a.label)),t.appendChild(s)}}),t}function stackedGradient(e){var t=0;if(e.forEach(function(e){t+=e.value}),t<=0)return"#e2e8f0";var a=[],s=0;return e.forEach(function(e){if(!(e.value<=0)){var o=e.value/t*100;a.push(e.color+" "+s.toFixed(2)+"% "+(s+o).toFixed(2)+"%"),s+=o}}),1===a.length?e.filter(function(e){return e.value>0})[0].color:"linear-gradient(to top, "+a.join(", ")+")"}function renderBarChart(e,t,a,s,o){e.textContent="",t.forEach(function(t){var n=0===t.sessions,l=n?0:Math.max(4,t.messages/a*140),d=el("div",{class:"bar-group"}),r=s;o&&!n&&t.cost>0&&(r=stackedGradient([{color:CLAUDE_COLOR,value:t.claudeCost||0},{color:CODEX_COLOR,value:t.codexCost||0},{color:OPENCODE_COLOR,value:t.opencodeCost||0}]));var c=el("div",{class:"bar",style:"height:"+(n?"2":l)+"px;background:"+(n?"#e2e8f0":r)+";"}),i=fullDateStr(t.date)+" | "+fmtUSD(t.cost);o?(t.claudeCost&&(i+="\nClaude "+fmtUSD(t.claudeCost)),t.codexCost&&(i+="\nCodex "+fmtUSD(t.codexCost)),t.opencodeCost&&(i+="\nOpenCode "+fmtUSD(t.opencodeCost))):i+=", "+t.sessions+" sessions",c.appendChild(el("div",{class:"tooltip"},i)),d.appendChild(c),d.appendChild(el("div",{class:"bar-label"},t.date.slice(5))),e.appendChild(d)})}function renderWeeklyChart(e,t,a,s,o){e.textContent="";var n=1;t.forEach(function(e){a[e].cost>n&&(n=a[e].cost)}),t.forEach(function(t){var l=a[t],d=Math.max(8,l.cost/n*130),r=el("div",{class:"bar-group"});r.appendChild(el("div",{class:"bar-cost",style:"color:"+s},fmtUSD(l.cost)));var c=s;o&&l.cost>0&&(c=stackedGradient([{color:CLAUDE_COLOR,value:l.claudeCost||0},{color:CODEX_COLOR,value:l.codexCost||0},{color:OPENCODE_COLOR,value:l.opencodeCost||0}]));var i=el("div",{class:"bar",style:"height:"+d+"px;background:"+c+";"}),p=weekLabel(t)+" | "+fmtUSD(l.cost);o?(l.claudeCost&&(p+="\nClaude "+fmtUSD(l.claudeCost)),l.codexCost&&(p+="\nCodex "+fmtUSD(l.codexCost)),l.opencodeCost&&(p+="\nOpenCode "+fmtUSD(l.opencodeCost))):p+=", "+l.sessions+" sessions",i.appendChild(el("div",{class:"tooltip"},p)),r.appendChild(i),r.appendChild(el("div",{class:"bar-label"},weekLabel(t))),e.appendChild(r)})}var PROJ_COLORS=["#D37356","#7385FE","#047857","#e4a222","#8b5cf6","#ec4899","#14b8a6","#f97316","#6366f1","#84cc16"];function renderProjects(e,t,a,s){if(t&&t.length){var o=el("div",{class:"section"});o.appendChild(el("h2",null,"Projects"));var n=el("div",{class:"proj-wrap"}),l=0;t.forEach(function(e){l+=e.cost});var d=[],r=0,c=0;t.forEach(function(e,t){t<5?d.push({name:e.name,cost:e.cost,sessions:e.sessions,color:PROJ_COLORS[t%PROJ_COLORS.length]}):(r+=e.cost,c+=e.sessions)}),r>0&&d.push({name:"Other ("+(t.length-5)+")",cost:r,sessions:c,color:"#cbd5e1"});var i=[],p=0;d.forEach(function(e){var t=l>0?e.cost/l*100:0;i.push(e.color+" "+p.toFixed(2)+"% "+(p+t).toFixed(2)+"%"),p+=t});var u=el("div",{class:"proj-donut",style:"background:conic-gradient("+i.join(",")+");"});u.appendChild(el("div",{class:"proj-donut-hole"})),n.appendChild(u);var h=el("div",{class:"proj-legend"});if(d.forEach(function(e){var t=el("div",{class:"proj-legend-row"});t.appendChild(el("span",{class:"proj-swatch",style:"background:"+e.color})),t.appendChild(el("span",{class:"proj-legend-name"},e.name));var a=el("span",{class:"proj-legend-meta"});a.appendChild(el("span",{class:"proj-cost"},fmtUSD(e.cost))),a.appendChild(el("span",{class:"proj-sessions"},e.sessions+" sess")),t.appendChild(a),h.appendChild(t)}),t.length>5){var C=el("div",{class:"proj-more-list"});t.slice(5).forEach(function(e,t){var a=el("div",{class:"proj-more-row"});a.appendChild(el("span",{class:"proj-swatch",style:"background:#cbd5e1"})),a.appendChild(el("span",{class:"proj-legend-name"},e.name));var s=el("span",{class:"proj-legend-meta"});s.appendChild(el("span",{class:"proj-cost"},fmtUSD(e.cost))),s.appendChild(el("span",{class:"proj-sessions"},e.sessions+" sess")),a.appendChild(s),C.appendChild(a)}),C.style.display="none";var f=el("button",{class:"proj-toggle",type:"button"},"Show "+(t.length-5)+" more"),v=!1;f.addEventListener("click",function(){v=!v,C.style.display=v?"block":"none",f.textContent=v?"Show less":"Show "+(t.length-5)+" more"}),h.appendChild(f),h.appendChild(C)}n.appendChild(h),o.appendChild(n),e.appendChild(o)}}function renderPanel(e,t){var a=t.accent;e.textContent="",e.style.setProperty("--accent",a);var s=el("div",{class:"freshness-banner"}),o=el("span",{class:"date-info"});o.appendChild(document.createTextNode("Sessions: ")),o.appendChild(el("span",{class:"date-val"},String(t.totalSessions))),s.appendChild(o);var n=el("div",{style:"display:flex;gap:6px;align-items:center;"});t.badgeEls&&t.badgeEls.length&&t.badgeEls.forEach(function(e){n.appendChild(e)});var l=el("button",{class:"more-stats-toggle",type:"button"});l.textContent="More ▾",n.appendChild(l),s.appendChild(n),e.appendChild(s);var d=t.firstDate?new Date(t.firstDate):new Date,r=Math.ceil((new Date-d)/864e5)+1,c=t.tokenBreakdown,i=el("div",{class:"stats-grid"}),p=el("div",{class:"stat-card"});p.appendChild(el("div",{class:"stat-label"},"Total Est. Cost")),p.appendChild(el("div",{class:"stat-value cost"},fmtUSD(t.displayCost))),p.appendChild(el("div",{class:"stat-sub"},fullDateFromIso(t.firstDate)+" - today")),p.appendChild(el("div",{class:"stat-sub"},r+"d span, "+t.daysActive+" active")),i.appendChild(p),i.appendChild(createStatCard("Cost / Day",fmtUSD(t.costPerDay),"cost","avg across "+t.daysActive+" days")),i.appendChild(createStatCard("Cost / Session",fmtUSD(t.costPerSession),"cost",t.totalSessions+" total sessions")),i.appendChild(createStatCard("Streak",t.streak+" days"));var u=t.totalSessions>0?t.userMessages/t.totalSessions:0;i.appendChild(createStatCard("Msgs / Session",u.toFixed(1)));var h=createStatCard("Tokens",fmt(t.totalTokens||0));if(c){h.style.position="relative",h.classList.add("has-tooltip");var C=h.querySelector(".stat-label");C&&C.appendChild(el("span",{class:"info-icon"},"i"));var f=[];c.input&&f.push("Input: "+fmt(c.input)),c.output&&f.push("Output: "+fmt(c.output)),c.cacheRead&&f.push("Cache Read: "+fmt(c.cacheRead)),c.cacheWrite&&f.push("Cache Write: "+fmt(c.cacheWrite)),c.cached&&f.push("Cached: "+fmt(c.cached)),c.reasoning&&f.push("Reasoning: "+fmt(c.reasoning)),h.appendChild(el("div",{class:"stat-tooltip"},f.join("\n")))}i.appendChild(h);var v=t.displayCost>0?t.outputTokens/t.displayCost:0,m=createStatCard("Output / $",fmt(Math.round(v)));m.style.position="relative",m.classList.add("has-tooltip");var g=m.querySelector(".stat-label");if(g&&g.appendChild(el("span",{class:"info-icon"},"i")),m.appendChild(el("div",{class:"stat-tooltip"},"Output tokens per dollar spent\n"+fmt(t.outputTokens)+" output / "+fmtUSD(t.displayCost))),i.appendChild(m),c){var y=(c.cacheRead||0)+(c.cached||0)+(c.cacheWrite||0),D=createStatCard("Cache Rate",(t.totalTokens>0?y/t.totalTokens*100:0).toFixed(1)+"%");D.style.position="relative",D.classList.add("has-tooltip");var O=D.querySelector(".stat-label");O&&O.appendChild(el("span",{class:"info-icon"},"i"));var b=["Cache tokens as % of all tokens"];c.cacheRead&&b.push("Cache Read: "+fmt(c.cacheRead)),c.cached&&b.push("Cached: "+fmt(c.cached)),c.cacheWrite&&b.push("Cache Write: "+fmt(c.cacheWrite)),b.push("Total: "+fmt(y)+" / "+fmt(t.totalTokens)),D.appendChild(el("div",{class:"stat-tooltip"},b.join("\n"))),i.appendChild(D)}e.appendChild(i);var x=el("div",{class:"stats-grid stats-more"});x.style.display="none",x.appendChild(createStatCard("Messages",t.userMessages.toLocaleString()));var k=createStatCard("Output %",(t.totalTokens>0?t.outputTokens/t.totalTokens*100:0).toFixed(1)+"%");k.style.position="relative",k.classList.add("has-tooltip");var S=k.querySelector(".stat-label");S&&S.appendChild(el("span",{class:"info-icon"},"i")),k.appendChild(el("div",{class:"stat-tooltip"},"Output tokens as % of all tokens\n"+fmt(t.outputTokens)+" / "+fmt(t.totalTokens))),x.appendChild(k),t.extraCards&&t.extraCards.forEach(function(e){x.appendChild(e)}),e.appendChild(x);var E=!1;l.addEventListener("click",function(){E=!E,x.style.display=E?"":"none",l.textContent=E?"Less ▴":"More ▾"});var w=el("div",{class:"section"});w.appendChild(el("h2",null,"Daily Activity"));var M=el("div",{class:"chart-container"});t.stacked&&M.appendChild(makeLegend(t.activeProviders));var A=el("div",{class:"bar-chart"});if(renderBarChart(A,t.allDays,t.maxMsg,a,t.stacked),M.appendChild(A),w.appendChild(M),e.appendChild(w),t.weeklySorted&&t.weeklySorted.length>0){var L=el("div",{class:"section"});L.appendChild(el("h2",null,"Weekly Usage"));var T=el("div",{class:"chart-container"});t.stacked&&T.appendChild(makeLegend(t.activeProviders));var R=el("div",{class:"weekly-chart"});renderWeeklyChart(R,t.weeklySorted,t.weeklyMap,a,t.stacked),T.appendChild(R),L.appendChild(T),e.appendChild(L)}if(t.projects&&t.projects.length>0&&renderProjects(e,t.projects,a,t.stacked),t.modelUsage&&t.modelUsage.length>0){var _=el("div",{class:"section"});_.appendChild(el("h2",null,"Usage by Model"));var U=t.modelUsage[0].cost||1,j=!!t.showProviderBadge,N=el("div",{class:"model-usage-list"});t.modelUsage.forEach(function(e){var t=el("div",{class:"mu-row"}),a=el("div",{class:"mu-left"});if(a.appendChild(createModelTag(e.id)),j){var s="codex"===e.provider?"codex":"opencode"===e.provider?"opencode":"claude",o="codex"===e.provider?"Codex":"opencode"===e.provider?"OpenCode":"Claude",n=el("span",{class:"sub-badge "+s});n.textContent=o,a.appendChild(n)}t.appendChild(a);var l=el("div",{class:"mu-right"}),d=Math.max(2,e.cost/U*100),r="codex"===e.provider?CODEX_COLOR:"opencode"===e.provider?OPENCODE_COLOR:CLAUDE_COLOR;l.appendChild(el("div",{class:"mu-bar",style:"width:"+d+"%;background:"+r+";"})),l.appendChild(el("span",{class:"mu-cost"},fmtUSD(e.cost))),t.appendChild(l),N.appendChild(t)}),_.appendChild(N),e.appendChild(_)}if(t.dailyRows&&t.dailyRows.length>0){var B=el("div",{class:"section"}),P="model"===t.dailyCostView?"model":t.stacked?"agent":"model",F=el("div",{style:"display:flex;justify-content:space-between;align-items:center;gap:10px;"});if(F.appendChild(el("h2",null,"Daily Cost")),t.stacked&&"function"==typeof t.onDailyCostViewChange){var W=el("div",{class:"daily-view-toggle"});[{id:"agent",label:"Agent"},{id:"model",label:"Model"}].forEach(function(e){var a=el("button",{class:"daily-view-btn"+(P===e.id?" active":""),"data-view":e.id,type:"button"},e.label);a.addEventListener("click",function(){P!==e.id&&t.onDailyCostViewChange(e.id)}),W.appendChild(a)}),F.appendChild(W)}B.appendChild(F);var I=el("table"),X=el("thead"),q=el("tr");q.appendChild(el("th",null,"Date")),q.appendChild(el("th",{class:"r"},"Sessions")),q.appendChild(el("th",null,"agent"===P?"Agents":"Models")),q.appendChild(el("th",{class:"r"},"Est. Cost")),X.appendChild(q),I.appendChild(X);var V=el("tbody"),G={},K={};function H(e){if(Object.prototype.hasOwnProperty.call(G,e))return G[e];var t=modelUsageKey(e);return K[t]||0}t.modelUsage&&t.modelUsage.length&&t.modelUsage.forEach(function(e){var t=e.id,a=modelUsageKey(t),s=e.cost||0;G[t]=Math.max(G[t]||0,s),K[a]=(K[a]||0)+s}),t.dailyRows.forEach(function(e){var s=el("tr");s.appendChild(el("td",null,fullDateStr(e.date))),s.appendChild(el("td",{class:"num"},String(e.sessions)));var o=el("td"),n=a,l=null;if("agent"===P&&t.stacked){var d=rowAgentCosts(e),r=[];d.claude>0&&r.push({label:"Claude",cls:"claude",cost:d.claude,color:CLAUDE_COLOR}),d.codex>0&&r.push({label:"Codex",cls:"codex",cost:d.codex,color:CODEX_COLOR}),d.opencode>0&&r.push({label:"OpenCode",cls:"opencode",cost:d.opencode,color:OPENCODE_COLOR}),r.sort(function(e,t){return e.cost!==t.cost?t.cost-e.cost:e.label.localeCompare(t.label)}),r.length?(r.forEach(function(e){var t=el("span",{class:"sub-badge "+e.cls,style:"margin-left:0;margin-right:6px;"},e.label);o.appendChild(t)}),n=r[0].color):o.textContent="-"}else if(e.models&&e.models.length){var c=e.models.slice().sort(function(t,a){var s=e.modelCosts||{},o=s[t]||0,n=s[a]||0;if(o!==n)return n-o;var l=H(t),d=H(a);if(l!==d)return d-l;var r=modelSortKey(t),c=modelSortKey(a);return r!==c?r-c:t.localeCompare(a)});c.length&&(l=c[0]),c.forEach(function(e){o.appendChild(createModelTag(e)),o.appendChild(document.createTextNode(" "))}),l&&(n=colorForModel(l))}else o.textContent="-";s.appendChild(o),s.appendChild(el("td",{class:"cost-cell",style:"color:"+n},fmtUSD(e.cost))),V.appendChild(s)}),I.appendChild(V),B.appendChild(I),e.appendChild(B)}if(t.pricingNote){var J=el("div",{class:"pricing-note"});J.textContent=t.pricingNote,e.appendChild(J)}}function renderNoData(e,t,a){e.textContent="";var s=el("div",{class:"no-data"});s.appendChild(el("h3",null,"No "+t+" usage data found"));var o=el("p");o.appendChild(document.createTextNode("Install ")),o.appendChild(el("a",{href:a},t)),o.appendChild(document.createTextNode(" and use it to start tracking.")),s.appendChild(o),e.appendChild(s)}function main(){var e=DATA.claude,t=DATA.codex,a=DATA.opencode,s=null!==e,o=null!==t,n=null!==a,l=DATA.defaultTab||"all",d="this_month",r="agent",c=s?buildOpts(e):null,i=o?buildOpts(t):null,p=n?buildOpts(a):null,u=mergeOpts([c,i,p]),h=document.getElementById("tab-bar");[{id:"all",label:"All"},{id:"claude",label:"Claude",icon:"claude.webp"},{id:"codex",label:"Codex",icon:"codex.webp"},{id:"opencode",label:"OpenCode",icon:"opencode.webp"}].forEach(function(e){var t="undefined"!=typeof DATA&&DATA&&DATA.appMeta?DATA.appMeta:{},a=t.assetBase?toFileUrl(t.assetBase):"",s=[];e.icon&&a&&s.push(el("img",{class:"tab-icon",src:a+"/"+e.icon,alt:e.label+" logo"})),s.push(el("span",null,e.label));var o=el("button",{class:"tab-btn","data-tab":e.id},s);o.addEventListener("click",function(){m(e.id)}),h.appendChild(o)});var C=document.getElementById("range-select");function f(){var e=applyRange(u,d);if(e.dailyCostView=r,e.onDailyCostViewChange=function(e){r="model"===e?"model":"agent",f()},renderPanel(document.getElementById("panel-all"),e),s){var t=applyRange(c,d);t.dailyCostView="model",renderPanel(document.getElementById("panel-claude"),t)}else renderNoData(document.getElementById("panel-claude"),"Claude Code","https://code.claude.com/docs/en/overview");if(o){var a=applyRange(i,d);a.dailyCostView="model",renderPanel(document.getElementById("panel-codex"),a)}else renderNoData(document.getElementById("panel-codex"),"Codex CLI","https://developers.openai.com/codex/cli/");if(n){var l=applyRange(p,d);l.dailyCostView="model",renderPanel(document.getElementById("panel-opencode"),l)}else renderNoData(document.getElementById("panel-opencode"),"OpenCode","https://opencode.ai")}function v(e){d=e,C&&C.value!==e&&(C.value=e),f()}function m(e){document.querySelectorAll(".tab-btn").forEach(function(e){e.classList.remove("active")}),document.querySelectorAll(".tab-panel").forEach(function(e){e.classList.remove("active")}),document.querySelector('[data-tab="'+e+'"]').classList.add("active"),document.getElementById("panel-"+e).classList.add("active"),history.replaceState(null,"","#"+e)}RANGE_OPTIONS.forEach(function(e){var t=el("option",{value:e.id},e.label);C.appendChild(t)}),C.addEventListener("change",function(){v(C.value)}),v(d);var g=location.hash.replace("#","");-1!==["all","claude","codex","opencode"].indexOf(g)?m(g):m(l)}renderFooter(),function(){var e=document.getElementById("gen-time");if(e&&DATA.metadata&&DATA.metadata.createdAt){var t,a=Math.floor((Date.now()-new Date(DATA.metadata.createdAt).getTime())/1e3);t=a<5?"just now":a<60?a+"s ago":a<3600?Math.floor(a/60)+"m ago":a<86400?Math.floor(a/3600)+"h ago":Math.floor(a/86400)+"d ago",e.textContent=e.textContent+" ("+t+")"}}(),null!==DATA.claude||null!==DATA.codex||null!==DATA.opencode?main():document.querySelector(".container").insertAdjacentElement("afterbegin",el("div",{class:"no-data"},"No data. Run code-usage to generate."));
</script>
</body>
</html>
